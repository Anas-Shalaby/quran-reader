import{j as e,r as h,a as _,w as V,l as E,m as q,L as $,F as K,u as B,b as oe,c as ie,d as le,e as de,f as ce,g as he,h as ue,C as me,i as xe,P as ge,k as H,n as O,o as G,p as pe,q as fe,s as ye,t as be,R as Y,v,x as C,y as ke,z as we,A as J,B as je,D as ve,E as Ne,G as P,H as Se,I as Ce,J as Q,K as De,M as W,N as Pe,O as X,Q as Z,S as Ae,_ as D,T as Le,U as Ee,V as Me,W as Te,X as Re,Y as Ie,Z as $e,$ as S,a0 as ze,a1 as Be}from"./vendor-DGljAjNm.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();const F=({message:a="جارٍ التحميل...",size:s="large",fullScreen:t=!1})=>{const n={small:"h-8 w-8 border-2",medium:"h-12 w-12 border-4",large:"h-16 w-16 border-4"},r=t?"fixed inset-0 z-50 flex justify-center items-center bg-white/50 dark:bg-dark-50/50":"flex justify-center items-center";return e.jsx("div",{className:r,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`
            animate-spin rounded-full 
            border-t-4 border-green-500 
            ${n[s]} 
            mx-auto mb-4
            dark:border-green-300
          `}),e.jsx("h2",{className:"text-gray-700 dark:text-gray-200 text-xl font-bold",children:a})]})})},Fe=()=>{const[a,s]=h.useState(null),[t,n]=h.useState(new Date),[r,i]=h.useState(null),[o,d]=h.useState(null),[u,l]=h.useState(!0),f=async()=>{try{const m=t.toLocaleDateString("en-GB").replace(/\//g,"-"),p=(await _.get(`https://api.aladhan.com/v1/gToH/${m}`)).data.data.hijri;s({day:p.day,month:{ar:p.month.ar,en:p.month.en},year:p.year,weekdayName:p.weekday.ar}),l(!1)}catch(m){console.error("Hijri date fetch error:",m),d("تعذر جلب التاريخ الهجري"),l(!1)}};if(h.useEffect(()=>{f()},[]),o)return e.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"عذراً! "}),e.jsx("span",{className:"block sm:inline",children:o})]})});const x=m=>m.toLocaleDateString("ar-EG",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return e.jsx("div",{className:"container mx-auto px-4 py-6",children:u?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(F,{})}):e.jsxs("div",{className:"bg-white dark:bg-dark-100 rounded-xl shadow-md p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-green-800 dark:text-green-300 mb-2 text-right",children:"التاريخ الميلادي"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-right",children:x(t)})]}),a&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-green-800 dark:text-green-300 mb-2 text-right",children:"التاريخ الهجري"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-right",children:[a.day," ",a.month.ar," ",a.year]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-right",children:a.weekdayName})]}),r&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-right",children:["الموقع: ",r.latitude.toFixed(2),"°N، ",r.longitude.toFixed(2),"°E"]})]})})},Ve="https://api.quran.com/api/v4",ee=async()=>{try{return await V.v4.chapters.findAll({fetchFn:s=>_.get(s).then(t=>t.data)})}catch(a){throw console.error("Error fetching surahs:",a),a}},_e=async a=>{try{return(await _.get(`${Ve}/quran/verses/uthmani`,{params:{chapter_number:a}})).data.verses}catch(s){throw console.error(`Error fetching verses for Surah ${a}:`,s),s}},Ue=async(a,s)=>{try{const t=new E.Quran,n=s.find(d=>d.id===parseInt(a)),r=n?n.versesCount:7,i=[];for(let d=1;d<=r;d++){const u=t.getVerseWithTranslationAndTafseer(parseInt(a),d,E.TranslationEnum.English,E.TafseerEnum.TafseerAlSaddiArabic);i.push(u)}return await Promise.all(i)}catch(t){throw console.error(`Error fetching tafasir for Surah ${a}:`,t),t}},qe=async(a,s=1,t=10,n="en")=>{try{const r=a.trim().replace(/\s+/g," ");if(!r)return{results:[],totalResults:0,currentPage:s,totalPages:0};const i=await ee(),o=await V.v4.search.search(r,{language:q.ENGLISH,page:s,limit:t});if(o!=null&&o.results&&o.results.length>0){const m=o.results.map(c=>{const p=c.verseKey.split(":")[0],y=i.find(g=>g.id===parseInt(p));return{...c,surah_name:y?y.nameArabic:"",surah_translation:y?y.translatedName.name:""}});return{results:m,totalResults:o.total||m.length,currentPage:s,totalPages:Math.ceil((o.total||m.length)/t)}}const d=r.split(" "),u=await Promise.all(d.map(async m=>{const c=await V.v4.search.search(m,{language:q.ENGLISH,page:s,limit:t});return(c==null?void 0:c.results)||[]})),x=Array.from(new Set(u.flat().map(m=>JSON.stringify(m)))).map(m=>JSON.parse(m)).filter(m=>d.every(c=>{const p=c.toLowerCase();return m.text.toLowerCase().includes(p)||m.verse_key.toLowerCase().includes(p)||m.translation&&m.translation.toLowerCase().includes(p)})).map(m=>{const c=m.verse_key.split(":")[0],p=i.find(y=>y.id===parseInt(c));return{...m,surah_name:p?p.nameArabic:"",surah_translation:p?p.translatedName.name:""}});return await new Promise(m=>setTimeout(m,500)),{results:x,totalResults:x.length,currentPage:s,totalPages:Math.ceil(x.length/t)}}catch(r){return console.error("Error searching Quran:",r),{results:[],totalResults:0,currentPage:s,totalPages:0}}},te=h.createContext(),He=({children:a})=>{const[s,t]=h.useState([]);h.useEffect(()=>{const o=JSON.parse(localStorage.getItem("quran_bookmarks")||"[]");t(o)},[]);const n=(o,d)=>{const u={surahNumber:o,verseNumber:d},l=[...s,u];t(l),localStorage.setItem("quran_bookmarks",JSON.stringify(l))},r=(o,d)=>{const u=s.filter(l=>l.surahNumber!==o||l.verseNumber!==d);t(u),localStorage.setItem("quran_bookmarks",JSON.stringify(u))},i=()=>s[s.length-1]||null;return e.jsx(te.Provider,{value:{bookmarks:s,addBookmark:n,removeBookmark:r,getLastBookmark:i},children:a})},re=()=>{const a=h.useContext(te);if(!a)throw new Error("useQuranProgress must be used within a QuranProgressProvider");return a},Oe=({surahs:a})=>{const[s,t]=h.useState(""),{bookmarks:n,addBookmark:r,removeBookmark:i}=re(),o=a.filter(l=>l.nameArabic.includes(s)||l.translatedName.name.toLowerCase().includes(s.toLowerCase())),d=l=>n.some(f=>f.surahNumber===l),u=(l,f)=>{f.preventDefault(),d(l)?i(l):r(l,1)};return e.jsxs("div",{className:"space-y-6 min-h-screen dark:bg-dark-50 dark:text-gray-100 mb-10",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-dark-100 shadow-sm rounded-lg",children:e.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-dark-200 rounded-lg p-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-400 dark:text-gray-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"ابحث عن سورة...",value:s,onChange:l=>t(l.target.value),className:"w-full bg-transparent focus:outline-none text-right dark:bg-dark-200 dark:text-gray-100"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(l=>e.jsx("div",{className:"relative group",children:e.jsx($,{to:`/surah/${l.id}`,className:"block",children:e.jsxs("div",{className:"bg-white dark:bg-dark-100 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex-grow text-right",children:[e.jsx("h2",{className:"text-lg font-bold text-green-800 dark:text-green-300 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors",children:l.nameArabic}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:l.translatedName.name})]}),e.jsx("div",{children:e.jsx("button",{onClick:f=>u(l.id,f),className:`
                 top-2 left-2 p-2 rounded-full transition-colors z-10
                ${d(l.id)?"text-yellow-500 bg-yellow-100":"text-gray-500 hover:text-yellow-500"}
              `,children:e.jsx(K,{className:"w-5 h-5"})})}),e.jsx("div",{className:"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 rounded-full w-10 h-10 flex items-center justify-center",children:l.id})]})})},l.id))}),o.length===0&&e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:e.jsx("p",{children:"لم يتم العثور على سور مطابقة"})})]})},Ge=({surahNumber:a,verseNumber:s})=>{const{bookmarks:t,addBookmark:n,removeBookmark:r}=re(),i=t.some(d=>d.surahNumber===a&&d.verseNumber===s),o=()=>{i?r(a,s):n(a,s)};return e.jsx("button",{onClick:o,className:`
        p-2 rounded-full transition-colors 
        ${i?"text-yellow-500 bg-yellow-100":"text-gray-500 hover:text-yellow-500"}
      `,children:e.jsx(K,{className:"w-5 h-5"})})},Qe=({surahs:a})=>{var y;const s=B(),{surahNumber:t}=oe(),[n,r]=h.useState([]),[i,o]=h.useState([]),[d,u]=h.useState(!0),[l,f]=h.useState({}),[x,m]=h.useState(null),c=a.find(g=>g.id===parseInt(t));h.useEffect(()=>{(async()=>{try{const b=await _e(t),w=await Ue(t,a);r(b),o(w);const k=b.reduce((N,A)=>(N[A.id]=!1,N),{});f(k),u(!1)}catch(b){console.error("Error loading surah details:",b),u(!1)}})()},[t,a]);const p=g=>{f(b=>({...b,[g]:!b[g]}))};return d?e.jsx(F,{message:"جارٍ تحميل السورة...",fullScreen:!0}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-50 pb-16",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-700 dark:from-dark-100 dark:to-dark-200 text-white py-6 px-4 relative",children:[e.jsx("button",{onClick:()=>s(-1),className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/20 dark:bg-white/10 rounded-full p-2 hover:bg-white/30 transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2 dark:text-gray-100",children:c==null?void 0:c.nameArabic}),e.jsxs("div",{className:"flex justify-center space-x-4 text-lg dark:text-gray-300",children:[e.jsx("span",{children:(y=c==null?void 0:c.translatedName)==null?void 0:y.name}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["عدد الآيات: ",c==null?void 0:c.versesCount]})]})]})]}),e.jsx("div",{className:"container mx-auto px-4 py-6 space-y-6",children:n.map((g,b)=>e.jsxs("div",{className:"bg-white dark:bg-dark-100 rounded-xl shadow-md p-4 transition-all duration-300 group",onMouseEnter:()=>m(g.id),onMouseLeave:()=>m(null),onClick:()=>i[b]&&p(g.id),children:[e.jsxs("div",{className:`
                text-right text-2xl leading-loose mb-4 
                dark:text-gray-100
                ${i[b]?"cursor-pointer":""}
              `,style:{fontFamily:"Amiri Quran, serif",direction:"rtl"},children:[g.text_uthmani,e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 mr-2 select-none",children:["(",g.verse_key.split(":")[1],")"]})]}),x===g.id&&i[b]&&e.jsx("div",{className:"absolute left-4 top-0 mt-2 z-10 pointer-events-none",children:e.jsx("div",{className:"bg-black text-white text-xs rounded-lg py-1 px-2 shadow-lg",children:"اضغط للحصول على التفسير"})}),i[b]&&l[g.id]&&e.jsxs("div",{className:"bg-green-50 dark:bg-dark-200 p-4 rounded-lg animate-fade-in relative mt-4",children:[e.jsx("div",{className:"absolute top-2 right-2 text-green-800 dark:text-green-300",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg mt-3 font-semibold text-green-800 dark:text-green-300 mb-2",children:"التفسير"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-right",children:i[b].tafseer})]}),e.jsx(Ge,{surahNumber:parseInt(t),verseNumber:g.id})]},g.id))})]})},We=()=>{const[a,s]=h.useState(""),[t,n]=h.useState([]),[r,i]=h.useState(0),[o,d]=h.useState(1),[u,l]=h.useState(1),[f,x]=h.useState(!1),[m,c]=h.useState(null),[p,y]=h.useState(!1),g=async(k,N=1)=>{k==null||k.preventDefault();const A=a.trim();if(!A){n([]),i(0),c(null);return}x(!0),c(null),y(!0);try{const T=await qe(A,N),U=T.results||[];n(U),i(T.totalResults||0),d(N),l(T.totalPages||1),U.length===0&&c("لم يتم العثور على نتائج مطابقة. حاول بكلمات مختلفة.")}catch{c("حدث خطأ أثناء البحث. يرجى المحاولة مرة أخرى."),n([]),i(0)}finally{x(!1)}},b=k=>{g(null,k)},w=k=>{k.key==="Enter"&&g(k)};return f?e.jsx(F,{message:"جارٍ البحث...",fullScreen:!0}):e.jsxs("div",{className:"space-y-6 pb-24 dark:bg-dark-50 dark:text-gray-100 min-h-screen",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-dark-100 shadow-sm rounded-lg",children:e.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-dark-200 rounded-lg p-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-400 dark:text-gray-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"ابحث في القرآن...",value:a,onChange:k=>{s(k.target.value),y(!1),c(null)},onKeyPress:w,className:"w-full bg-transparent focus:outline-none text-right dark:bg-dark-200 dark:text-gray-100"}),e.jsx("button",{onClick:g,className:"bg-green-500 dark:bg-green-700 text-white p-2 rounded-lg mr-2",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),!f&&p&&a&&e.jsx("div",{className:"text-center text-gray-600 dark:text-gray-300 py-2",children:r>0?`تم العثور على ${r} نتيجة`:"لم يتم العثور على نتائج"}),m&&e.jsx("div",{className:"text-center text-red-500 dark:text-red-400 py-4",children:m}),e.jsx("div",{className:"container mx-auto px-4 space-y-4",children:t.map((k,N)=>e.jsxs("div",{className:"bg-white dark:bg-dark-100 rounded-xl shadow-md p-4",children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsx("p",{className:"text-green-800 dark:text-green-300 font-bold text-sm",children:k.verse_key}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:[k.surah_name," • ",k.surah_translation]})]}),e.jsx("p",{className:"text-right text-gray-700 dark:text-gray-300",style:{fontFamily:"Amiri Quran, serif"},children:k.text})]},N))}),u>1&&e.jsxs("div",{className:"flex justify-center items-center space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>b(o+1),disabled:o===u,className:"p-2 bg-green-500 dark:bg-green-700 text-white rounded-full disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[o," / ",u]}),e.jsx("button",{onClick:()=>b(o-1),disabled:o===1,className:"p-2 bg-green-500 dark:bg-green-700 text-white rounded-full disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})]})]})},Ke=()=>{const[a,s]=h.useState(null),[t,n]=h.useState(!0),[r,i]=h.useState(!1),[o,d]=h.useState(!1);h.useEffect(()=>{u()},[]);const u=async()=>{n(!0);try{const c=new E.Hadith,p=Math.floor(Math.random()*100)+1,y=await c.getSection(E.HadithBook.Bukhari,p,E.HadithLangEnum.Arabic),g=Math.floor(Math.random()*y.hadiths.length),b=y.hadiths[g];s({text:b.text,narrator:b.narrator,book:"صحيح البخاري",section:y.name}),n(!1)}catch(c){console.error("Error fetching hadith:",c),n(!1)}},l=()=>{if(a){const c=`${a.text}
الكتاب: ${a.book}`;navigator.clipboard.writeText(c),i(!0),setTimeout(()=>i(!1),2e3)}},f=()=>{const c=`حديث نبوي شريف:

"${a.text}"
الكتاب: ${a.book}`,p=encodeURIComponent(c);return{twitter:`https://twitter.com/intent/tweet?text=${p}`,whatsapp:`https://wa.me/?text=${p}`,telegram:`https://t.me/share/url?url=&text=${p}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=&quote=${p}`}},x=c=>{const p=f();window.open(p[c],"_blank")},m=({platform:c,icon:p,bgColor:y,textColor:g,onClick:b})=>e.jsxs("button",{onClick:b,className:`
        flex flex-col items-center justify-center 
        p-3 sm:p-4 space-y-2 
        bg-${y}-50 dark:bg-${y}-900 
        rounded-xl shadow-md 
        hover:bg-${y}-100 dark:hover:bg-${y}-800 
        transition-all duration-300 
        transform hover:-translate-y-1
      `,children:[e.jsx(p,{className:`text-2xl sm:text-3xl ${g} dark:text-white`}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:c})]});return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-200 rounded-3xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-700 p-4 sm:p-6 text-center",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white drop-shadow-md",children:"أحاديث شريفة"}),e.jsx("p",{className:"text-sm sm:text-base text-white/80 mt-2",children:"استمتع بحكمة من أحاديث الرسول ﷺ"})]}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[a&&e.jsxs("div",{className:"bg-gray-50 dark:bg-dark-100 rounded-2xl p-4 sm:p-6 shadow-inner",children:[e.jsxs("blockquote",{className:"relative text-right text-base sm:text-xl text-gray-800 dark:text-gray-200 leading-relaxed",children:[e.jsx("span",{className:"absolute top-0 right-0 text-4xl sm:text-6xl text-green-200 dark:text-green-800 opacity-50",children:'"'}),a.text,e.jsx("span",{className:"absolute bottom-0 left-0 text-4xl sm:text-6xl text-green-200 dark:text-green-800 opacity-50",children:'"'})]}),e.jsx("div",{className:"mt-4 sm:mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex space-x-4 w-full sm:w-auto justify-center sm:justify-start",children:[e.jsx("button",{onClick:l,className:`
                        p-3 rounded-full transition-all duration-300
                        ${r?"bg-green-500 text-white scale-110":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-300"}
                      `,title:"نسخ الحديث",children:e.jsx(ie,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>d(!0),className:"p-3 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-300 transition-all",title:"مشاركة الحديث",children:e.jsx(le,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"text-center sm:text-left w-full sm:w-auto",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-bold",children:"الكتاب:"})," ",a.book]})})]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:u,className:`
                bg-green-500 text-white 
                px-4 sm:px-6 py-2 sm:py-3 rounded-full 
                hover:bg-green-600 
                transition-all duration-300 
                flex items-center justify-center 
                space-x-2 
                mx-auto 
                shadow-md 
                hover:shadow-lg
                text-sm sm:text-base
              `,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:h-6 sm:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"حديث جديد"})]})})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-dark-200 rounded-2xl shadow-2xl p-4 sm:p-6 w-full max-w-md transform transition-all",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-green-800 dark:text-green-300",children:"مشاركة الحديث"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:h-6 sm:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[e.jsx(m,{platform:"تويتر",icon:de,bgColor:"blue",textColor:"text-blue-600",onClick:()=>x("twitter")}),e.jsx(m,{platform:"واتساب",icon:ce,bgColor:"green",textColor:"text-green-600",onClick:()=>x("whatsapp")}),e.jsx(m,{platform:"تيليجرام",icon:he,bgColor:"blue",textColor:"text-blue-400",onClick:()=>x("telegram")}),e.jsx(m,{platform:"فيسبوك",icon:ue,bgColor:"indigo",textColor:"text-indigo-600",onClick:()=>x("facebook")})]})]})})]})},Ye=(a,s,t)=>{try{const[n,r,i]=a.split("-").map(Number),o=new Date(i,r-1,n),d=new me(s,t),u=xe.Egyptian(),l=new ge(d,o,u);return{fajr:L(l.fajr),sunrise:L(l.sunrise),dhuhr:L(l.dhuhr),asr:L(l.asr),maghrib:L(l.maghrib),isha:L(l.isha)}}catch(n){throw console.error("Error calculating prayer times:",n),n}},L=a=>a?a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):"",Je=a=>{const t=new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}),n={Fajr:a.fajr,Sunrise:a.sunrise,Dhuhr:a.dhuhr,Asr:a.asr,Maghrib:a.maghrib,Isha:a.isha};for(const[r,i]of Object.entries(n))if(t<=i)return r;return"Isha"},R={latitude:30.0444,longitude:31.2357},Xe={Fajr:H,Sunrise:O,Dhuhr:G,Asr:G,Maghrib:O,Isha:H},Ze=()=>{const[a,s]=h.useState(null),[t,n]=h.useState(null),[r,i]=h.useState(R),[o,d]=h.useState(!0),[u,l]=h.useState(null),[f,x]=h.useState(new Date);if(h.useEffect(()=>{const c=async()=>{try{const b=new Date,w=`${b.getDate().toString().padStart(2,"0")}-${(b.getMonth()+1).toString().padStart(2,"0")}-${b.getFullYear()}`;"geolocation"in navigator?navigator.geolocation.getCurrentPosition(async k=>{const N={latitude:k.coords.latitude,longitude:k.coords.longitude};i(N),await p(w,N)},()=>{p(w,R)}):await p(w,R)}catch{l("Unable to fetch prayer times"),d(!1)}},p=async(b,w)=>{try{const k=Ye(b,w.latitude,w.longitude);s(k),n(Je(k)),d(!1)}catch{l("Unable to fetch prayer times"),d(!1)}};c();const y=setInterval(()=>{x(new Date)},6e4),g=setInterval(c,36e5);return()=>{clearInterval(y),clearInterval(g)}},[]),o)return e.jsx(F,{});if(u)return e.jsx("div",{className:"text-red-500 text-center p-4 dark:text-red-300",children:u});const m=["Fajr","Sunrise","Dhuhr","Asr","Maghrib","Isha"];return e.jsx("div",{className:"container mx-auto p-4  ",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:"مواقيت الصلاة"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:f.toLocaleDateString("ar-EG",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("p",{className:"text-xl font-semibold text-green-600 dark:text-green-400 mt-2",children:f.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:m.map(c=>{const p=Xe[c],y=t===c;return e.jsxs("div",{className:`
                  p-4 rounded-lg shadow-md transition-all duration-300 
                  ${y?"bg-green-100 border-2 border-green-500 dark:bg-green-900 dark:border-green-700":"bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700"}
                `,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`
                      text-lg font-semibold 
                      ${y?"text-green-700 dark:text-green-300":"text-gray-700 dark:text-gray-200"}
                    `,children:c==="Sunrise"?"الشروق":c==="Fajr"?"الفجر":c==="Dhuhr"?"الظهر":c==="Asr"?"العصر":c==="Maghrib"?"المغرب":"العشاء"}),e.jsx("p",{className:`
                      text-sm 
                      ${y?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}
                    `,children:a[c.toLowerCase()]})]}),e.jsx(p,{className:`
                      w-8 h-8 
                      ${y?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-500"}
                    `})]}),y&&e.jsx("div",{className:"mt-2 text-center",children:e.jsx("span",{className:"text-xs text-green-700 dark:text-green-300 font-medium",children:"الوقت الحالي"})})]},c)})}),e.jsx("div",{className:"text-center mt-6 text-gray-600 dark:text-gray-300",children:e.jsxs("p",{children:["الموقع: ",r===R?"القاهرة، مصر (افتراضي)":" القاهرة"]})})]})})},et={apiKey:"AIzaSyDeqM7mekvAHI_alyP2lwhiG_65PqhdRFk",authDomain:"readers-2af16.firebaseapp.com",projectId:"readers-2af16",storageBucket:"readers-2af16.firebasestorage.app",messagingSenderId:"736327315760",appId:"1:736327315760:web:029f483a1ef56e1ebbd8f5"},se=pe(et),j=fe(se),I=ye(se),ae=h.createContext(),tt=({children:a})=>{const[s,t]=h.useState(null),[n,r]=h.useState(!0),[i,o]=h.useState(null),d=async m=>{try{const c=v(j,"users",m.uid),p=await C(c);if(p.exists()){const y=p.data();if(y.planId)return o(y.planId),y.planId}return null}catch(c){return console.error("Error checking user plan:",c),null}},u=async(m,c)=>{try{const y=(await ke(I,m,c)).user;return await d(y)?{user:y,needsPlanSelection:!1}:{user:y,needsPlanSelection:!0}}catch(p){throw console.error("Sign In Error",p),p}},l=async(m,c,p={})=>{try{const g=(await we(I,m,c)).user;return await J(v(j,"users",g.uid),{email:g.email,createdAt:new Date,...p}),{user:g,needsPlanSelection:!0}}catch(y){throw console.error("Sign Up Error",y),y}},f=async()=>{try{await je(I),t(null),o(null)}catch(m){console.error("Logout Error",m)}};h.useEffect(()=>{const m=be(I,async c=>{if(c){const p=await d(c);o(p)}t(c),r(!1)});return()=>m()},[]);const x={user:s,userPlan:i,loading:n,signUp:l,signIn:u,logout:f};return e.jsx(ae.Provider,{value:x,children:!n&&a})},M=()=>{const a=Y.useContext(ae);if(a===void 0)throw new Error("useAuth must be used within an AuthProvider");return a},rt=()=>{const[a,s]=h.useState(""),[t,n]=h.useState(""),[r,i]=h.useState(""),[o,d]=h.useState(""),{signUp:u}=M(),l=B(),f=async x=>{if(x.preventDefault(),d(""),t!==r){d("كلمات المرور غير متطابقة");return}try{const{user:m,needsPlanSelection:c}=await u(a,t);l(c?"/select-plan":"/dashboard")}catch{d("حدث خطأ أثناء إنشاء الحساب. يرجى المحاولة مرة أخرى")}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-dark-100 py-4 px-2 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"mt-4 text-2xl sm:text-3xl font-extrabold text-gray-900 dark:text-white",children:"إنشاء حساب جديد"}),e.jsx("p",{className:"mt-2 text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"انضم إلى رحلة تحفيظ القرآن الكريم"})]}),e.jsxs("form",{className:"space-y-4 bg-white dark:bg-dark-200 p-4 sm:p-8 rounded-xl shadow-md",onSubmit:f,dir:"rtl",children:[o&&e.jsx("div",{className:"text-red-500 text-center mb-2 text-sm",children:o}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"البريد الإلكتروني"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:a,onChange:x=>s(x.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-dark-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-dark-200 dark:text-white",placeholder:"البريد الإلكتروني"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"كلمة المرور"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:t,onChange:x=>n(x.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-dark-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-dark-200 dark:text-white",placeholder:"كلمة المرور"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"تأكيد كلمة المرور"}),e.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",required:!0,value:r,onChange:x=>i(x.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-dark-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-dark-200 dark:text-white",placeholder:"تأكيد كلمة المرور"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"w-full py-2 px-4 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-green-700 dark:hover:bg-green-800 transition-colors",children:"إنشاء حساب"})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:["لديك حساب بالفعل؟"," ",e.jsx("button",{type:"button",onClick:()=>l("/login"),className:"text-xs sm:text-sm font-medium text-green-600 hover:text-green-500 dark:text-green-400 dark:hover:text-green-300",children:"تسجيل الدخول"})]})})]})]})})},ne={1:"الفاتحة",2:"البقرة",3:"آل عمران",4:"النساء",5:"المائدة",6:"الأنعام",7:"الأعراف",8:"الأنفال",9:"التوبة",10:"يونس",11:"هود",12:"يوسف",13:"الرعد",14:"إبراهيم",15:"الحجر",16:"النحل",17:"الإسراء",18:"الكهف",19:"مريم",20:"طه",21:"الأنبياء",22:"الحج",23:"المؤمنون",24:"النور",25:"الفرقان",26:"الشعراء",27:"النمل",28:"القصص",29:"العنكبوت",30:"الروم",31:"لقمان",32:"السجدة",33:"الأحزاب",34:"سبأ",35:"فاطر",36:"يس",37:"الصافات",38:"ص",39:"الزمر",40:"غافر",41:"فصلت",42:"الشورى",43:"الزخرف",44:"الدخان",45:"الجاثية",46:"الأحقاف",47:"محمد",48:"الفتح",49:"الحجرات",50:"ق",51:"الذاريات",52:"الطور",53:"النجم",54:"القمر",55:"الرحمن",56:"الواقعة",57:"الحديد",58:"المجادلة",59:"الحشر",60:"الممتحنة",61:"الصف",62:"الجمعة",63:"المنافقون",64:"التغابن",65:"الطلاق",66:"التحريم",67:"الملك",68:"القلم",69:"الحاقة",70:"المعارج",71:"نوح",72:"الجن",73:"المزمل",74:"المدثر",75:"القيامة",76:"الإنسان",77:"المرسلات",78:"النبأ",79:"النازعات",80:"عبس",81:"التكوير",82:"الانفطار",83:"المطففين",84:"الانشقاق",85:"البروج",86:"الطارق",87:"الأعلى",88:"الغاشية",89:"الفجر",90:"البلد",91:"الشمس",92:"الليل",93:"الضحى",94:"الشرح",95:"التين",96:"العلق",97:"القدر",98:"البينة",99:"الزلزلة",100:"العاديات",101:"القارعة",102:"التكاثر",103:"العصر",104:"الهمزة",105:"الفيل",106:"قريش",107:"الماعون",108:"الكوثر",109:"الكافرون",110:"النصر",111:"المسد",112:"الإخلاص",113:"الفلق",114:"الناس"};class st{async createUserPlan(s,t){try{const n=v(j,"users",s);return await J(n,{planId:t,startDate:new Date().toISOString(),progress:{completedVerses:0,lastSurah:1,lastAyah:0,lastUpdated:new Date},failures:{},notificationsEnabled:!0},{merge:!0}),n}catch(n){throw console.error("Error creating user plan:",n),n}}async logDailyProgress(s,t){try{const n=v(j,"users",s),r={completedVerses:t.completedVerses||0,dailyGoalMet:t.dailyGoalMet||!1,surah:t.surah||t.lastSurah||"",lastAyah:t.endAyah||t.lastAyah||0,startAyah:t.startAyah||0,timestamp:new Date},i={"progress.completedVerses":ve(r.completedVerses),"progress.dailyGoalMet":r.dailyGoalMet,"progress.lastSurah":r.surah,"progress.lastAyah":r.lastAyah,"progress.lastMemorizedLocation":{surah:r.surah,ayah:r.lastAyah},"progress.lastUpdated":r.timestamp,"progress.completedTasks":Ne({type:t.taskType||"memorization",verses:r.completedVerses,surah:r.surah,date:r.timestamp,dailyGoalMet:r.dailyGoalMet})};await P(n,i);const o=new CustomEvent("dashboard-update",{detail:{lastSurah:r.surah,lastAyah:r.lastAyah,completedVerses:r.completedVerses,lastMemorizedLocation:{surah:r.surah,ayah:r.lastAyah}}});return window.dispatchEvent(o),r}catch(n){throw console.error("Error logging daily progress:",n),n}}async logFailure(s){try{const t=new Date().toISOString().split("T")[0],n=v(j,"users",s);await P(n,{[`failures.${t}`]:!0})}catch(t){throw console.error("Error logging failure:",t),t}}async trackFailures(s){try{const t=v(j,"users",s),r=(await C(t)).data();if(!r)throw new Error("User not found");const i=v(j,"plans",r.planId),d=(await C(i)).data();if(!d)throw new Error("Plan not found");const u=r.failures||{},l=new Date;l.setDate(l.getDate()-7),Object.keys(u).filter(x=>new Date(x)>=l).length>d.failureTolerance&&await this.adjustMemorizationPlan(s,r.planId)}catch(t){throw console.error("Error tracking failures:",t),t}}async adjustMemorizationPlan(s,t){try{const n=v(j,"users",s),r=v(j,"plans",t),d=(await C(r)).data().dailySchedule.map(u=>({...u,endAyah:Math.floor(u.endAyah*.8)}));await P(r,{dailySchedule:d,lastAdjusted:Se()}),await P(n,{planAdjustmentNotice:"Your memorization plan has been adjusted to help you succeed."})}catch(n){throw console.error("Error adjusting memorization plan:",n),n}}async generateProgressReport(s){try{const t=v(j,"users",s),r=(await C(t)).data();if(!r)throw new Error("User not found");if(!r.progress){await P(t,{progress:{completedVerses:0,lastSurah:"",lastAyah:0,lastMemorizedLocation:{surah:"",ayah:0},dailyGoalMet:!1,completedTasks:[]}});const l=(await C(t)).data();return{totalCompletedVerses:0,lastMemorizedLocation:{surah:"",ayah:0},failureRate:0}}const i=r.progress.completedTasks||[],o=i.filter(u=>!u.dailyGoalMet).length,d=i.length>0?o/i.length*100:0;return{totalCompletedVerses:r.progress.completedVerses||0,lastMemorizedLocation:{surah:r.progress.lastSurah||"",ayah:r.progress.lastAyah||0},failureRate:d}}catch(t){throw console.error("Error generating progress report:",t),t}}calculateFailureRate(s=[]){if(!s||s.length===0)return 0;const t=s.length;return s.filter(r=>!r.success).length/t*100}async fetchDailyTasks(s){try{const n=(await C(v(j,"users",s))).data();if(!n||!n.planId)throw new Error("No active plan found");const i=(await C(v(j,"plans",n.planId))).data();if(!i||!i.dailySchedule)throw new Error("No daily schedule found for this plan");let o;if(n.subscribedAt?o=typeof n.subscribedAt=="string"?new Date(n.subscribedAt):n.subscribedAt.toDate():n.startDate?o=typeof n.startDate=="string"?new Date(n.startDate):n.startDate.toDate():o=new Date,isNaN(o.getTime()))throw console.error("Invalid start date",n),new Error("Invalid subscription date");const u=Math.max(1,Math.floor((new Date-o)/(1e3*60*60*24))+1),l=i.dailySchedule.find(x=>x.day===`day${u}`||x.day===u.toString()||parseInt(x.day)===u);if(!l)throw console.warn(`No task found for day ${u}`,i.dailySchedule),new Error("No task found for today");const f=ne[l.startSurah]||`سورة رقم ${l.startSurah}`;return{memorization:{id:"memorization",icon:"📖",title:"حفظ آيات جديدة",description:`احفظ آيات من سورة ${f} من آية ${l.startAyah} إلى ${l.endAyah}`,completed:!1,verseCount:l.endAyah-l.startAyah+1,surah:f,startAyah:l.startAyah,endAyah:l.endAyah},revision:{id:"revision",icon:"🔁",title:"مراجعة المحفوظ",description:"راجع الآيات التي حفظتها في الأيام الماضية",completed:!1,verseCount:10}}}catch(t){return console.error("Error fetching daily tasks:",t),{memorization:{id:"memorization",icon:"📖",title:"حفظ آيات جديدة",description:"لم يتم العثور على مهمة اليوم",completed:!1,verseCount:0,surah:"",startAyah:0,endAyah:0},revision:{id:"revision",icon:"🔁",title:"مراجعة المحفوظ",description:"لم يتم العثور على مهمة المراجعة",completed:!1,verseCount:0}}}}}const z=new st,at=a=>ne[a]||`سورة رقم ${a}`;class nt{async sendReminder(s,t){return(await Ce(Q(j,"notifications"),{userId:s,type:"memorization_reminder",...t,createdAt:new Date,status:"pending"})).id}async updateNotificationPreferences(s,t){const n=v(j,"users",s);await P(n,{notificationsEnabled:t.enabled,notificationChannels:t.channels||["email","push"]})}async getPendingNotifications(s){const t=De(Q(j,"notifications"),W("userId","==",s),W("status","==","pending"));return(await Pe(t)).docs.map(r=>({id:r.id,...r.data()}))}async markNotificationAsRead(s){const t=v(j,"notifications",s);await P(t,{status:"read",readAt:new Date})}async sendDailyProgressReminder(s){const t=v(j,"users",s);(await C(t)).data().notificationsEnabled&&await this.sendReminder(s,{title:"Daily Quran Memorization Reminder",message:"You haven't logged your progress today. Let's continue your memorization journey!",priority:"high"})}async sendMotivationalMessage(s){const t=v(j,"users",s),r=(await C(t)).data();let i="";r.progress.completedVerses<50?i="Keep going! Every verse you memorize brings you closer to your goal.":r.progress.completedVerses<200?i="Wow! You're making great progress. Stay consistent!":i="You're an inspiration! Your dedication to memorizing the Quran is remarkable.",await this.sendReminder(s,{title:"Motivational Message",message:i,type:"motivation"})}}const ot=new nt,it=()=>{const{user:a}=M(),[s,t]=h.useState(null),[n,r]=h.useState(!0),[i,o]=h.useState(null),[d,u]=h.useState(!1);h.useEffect(()=>{(async()=>{if(!a){o("المستخدم غير مسجل"),r(!1);return}try{r(!0);const x=await z.fetchDailyTasks(a.uid);t(x)}catch(x){console.error("Error fetching daily tasks",x),o("تعذر تحميل المهام اليومية"),D.error("حدث خطأ أثناء جلب المهام",{style:{direction:"rtl",background:"#ff4b4b",color:"#fff"}})}finally{r(!1)}})()},[a]);const l=async f=>{if(!s)return;const x=s[f];try{await z.logDailyProgress(a.uid,{completedVerses:x.verseCount,dailyGoalMet:!0,taskType:f,surah:x.surah,startAyah:x.startAyah,endAyah:x.endAyah}),t(m=>({...m,[f]:{...m[f],completed:!0}})),u(!0),setTimeout(()=>u(!1),3e3),D.success(`أحسنت! لقد أكملت مهمة ${x.title}`,{style:{direction:"rtl",background:"#4bb543",color:"#fff"},icon:"🎉"})}catch(m){console.error("Error logging task completion",m),D.error("حدث خطأ أثناء تسجيل الإنجاز",{style:{direction:"rtl",background:"#ff4b4b",color:"#fff"}})}};return n?e.jsx("div",{className:"flex justify-center items-center min-h-[200px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-green-500"})}):i?e.jsx("div",{className:"bg-red-100 p-4 rounded-lg text-center",children:e.jsx("p",{className:"text-red-600",children:i})}):(console.log(s),e.jsxs("div",{className:"bg-white dark:bg-dark-200 shadow-lg rounded-lg p-6",children:[d&&e.jsx(X,{}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"مهام اليوم"}),e.jsx("div",{className:"space-y-4",children:Object.entries(s||{}).map(([f,x])=>e.jsxs("div",{className:`
              flex items-center justify-between p-4 rounded-lg transition-all duration-300
              ${x.completed?"bg-green-100 dark:bg-green-900/30":"bg-gray-100 dark:bg-dark-100 hover:bg-gray-200 dark:hover:bg-dark-50"}
            `,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`text-3xl ${x.completed?"text-green-600":"text-gray-500 dark:text-gray-300"}`,children:x.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:`
                  text-lg font-semibold 
                  ${x.completed?"text-green-800 dark:text-green-300":"text-gray-800 dark:text-white"}
                `,children:x.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:x.description})]})]}),e.jsx("button",{onClick:()=>l(f),disabled:x.completed,className:`
                p-2 rounded-full transition-all duration-300
                ${x.completed?"text-green-600 cursor-not-allowed":"text-gray-500 hover:bg-gray-200 dark:hover:bg-dark-50"}
              `,children:x.completed?e.jsx(Z,{size:24}):e.jsx(Ae,{size:24})})]},f))})]}))},lt=({title:a,value:s,icon:t,color:n})=>e.jsxs("div",{className:`bg-white dark:bg-dark-200 shadow-md rounded-lg p-6 flex items-center ${n}`,children:[e.jsx("div",{className:"mr-4 text-3xl",children:t}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-white",children:a}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s})]})]}),dt=()=>{const{user:a}=M(),[s,t]=h.useState({completedVerses:0,lastSurah:"",lastAyah:0,lastMemorizedLocation:{surah:"",ayah:0}}),[n,r]=h.useState([]),[i,o]=h.useState(!0),[d,u]=h.useState(null),[l,f]=h.useState(0),[x,m]=h.useState(!1),c=h.useCallback(async()=>{var g,b;if(!a){u("المستخدم غير مسجل"),o(!1);return}try{o(!0);const w=await z.generateProgressReport(a.uid),k=await ot.getPendingNotifications(a.uid);t({completedVerses:w.totalCompletedVerses||0,lastSurah:((g=w.lastMemorizedLocation)==null?void 0:g.surah)||"",lastAyah:((b=w.lastMemorizedLocation)==null?void 0:b.ayah)||0,lastMemorizedLocation:w.lastMemorizedLocation||{surah:"",ayah:0}}),r(k||[])}catch(w){console.error("Dashboard fetch error",w),u("حدث خطأ أثناء جلب البيانات"),D.error("تعذر تحميل بيانات التقدم",{style:{direction:"rtl",background:"#ff4b4b",color:"#fff"}})}finally{o(!1)}},[a]);h.useEffect(()=>{c();const g=b=>{const{lastSurah:w,lastAyah:k,completedVerses:N}=b.detail;t(A=>({...A,lastSurah:w,lastAyah:k,completedVerses:N}))};return window.addEventListener("dashboard-update",g),()=>{window.removeEventListener("dashboard-update",g)}},[c]);const p=async()=>{var g,b;if(!a){D.error("يرجى تسجيل الدخول أولاً",{style:{direction:"rtl",background:"#ff4b4b",color:"#fff"}});return}if(l<=0){D.error("الرجاء إدخال عدد الآيات الصحيح",{style:{direction:"rtl",background:"#ff4b4b",color:"#fff"}});return}try{const w={completedVerses:l,dailyGoalMet:!0,lastSurah:((g=s.lastMemorizedLocation)==null?void 0:g.surah)||"",lastAyah:((b=s.lastMemorizedLocation)==null?void 0:b.ayah)||""},k=await z.logDailyProgress(a.uid,w);m(!0),setTimeout(()=>m(!1),5e3),await c(),f(0),D.success("تم تسجيل التقدم بنجاح",{style:{direction:"rtl",background:"#4bb543",color:"#fff"},icon:"🎉"})}catch(w){console.error("Progress logging error",w),D.error("تعذر تسجيل التقدم",{style:{direction:"rtl",background:"#ff4b4b",color:"#fff"}})}};if(i)return e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-green-500"})});if(d)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-red-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl text-red-600 mb-4",children:d}),e.jsx("button",{onClick:c,className:"bg-green-500 text-white px-4 py-2 rounded",children:"إعادة المحاولة"})]})});const y=[{title:"آخر سورة محفوظة",value:s.lastSurah?at(s.lastSurah):"لم يتم الحفظ بعد",icon:e.jsx(Le,{}),color:"text-green-500"},{title:"آخر آية محفوظة",value:s.lastAyah>0?`الآية ${s.lastAyah}`:"لم يتم الحفظ بعد",icon:e.jsx(Ee,{}),color:"text-blue-500"},{title:"الآيات المحفوظة",value:`${s.completedVerses} آية`,icon:e.jsx(Z,{}),color:"text-purple-500"}];return e.jsxs("div",{className:"container mx-auto p-6 text-right",children:[e.jsx("div",{className:"mb-10",children:e.jsx(it,{})}),x&&e.jsx(X,{}),e.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800 dark:text-white",children:"لوحة متابعة حفظ القرآن"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:y.map((g,b)=>e.jsx(lt,{title:g.title,value:g.value,icon:g.icon,color:g.color},b))}),e.jsxs("div",{className:"bg-white dark:bg-dark-200 shadow rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-white",children:"تسجيل التقدم اليومي"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"number",placeholder:"عدد الآيات المحفوظة اليوم",value:l,onChange:g=>f(parseInt(g.target.value)||0),className:"w-full p-2 border rounded mb-4 dark:bg-dark-100 dark:text-white"}),e.jsx("button",{onClick:p,className:"bg-green-500 text-white px-4 py-2 rounded mb-4 hover:bg-green-600 transition-colors",children:"تسجيل"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-200 shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-white",children:"التنبيهات"}),n.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-300",children:"لا توجد تنبيهات حالياً"}):n.map(g=>{var b,w;return e.jsxs("div",{className:"mb-4 p-4 bg-gray-100 dark:bg-dark-100 rounded flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"dark:text-white",children:g.message}),e.jsx("small",{className:"text-gray-500 dark:text-gray-300",children:(w=(b=g.createdAt)==null?void 0:b.toDate())==null?void 0:w.toLocaleString()})]}),e.jsx("button",{onClick:()=>{},className:"text-blue-500 hover:text-blue-700",children:"عرض التفاصيل"})]},g.id)})]})]})},ct=[{id:"plan_a",name:"الخطة الأساسية",price:"مجاني",features:["تحفيظ آية يومية","إرشادات أساسية في التجويد","تتبع التقدم","دعم مجتمعي"],description:"مثالي للمبتدئين في رحلة تحفيظ القرآن"},{id:"plan_b",name:"الخطة المتقدمة",price:"9.99 دولار / شهريًا",features:["برنامج شامل للتحفيظ","تدريب شخصي على التجويد","تحليلات متقدمة للتقدم","جلسات إرشادية فردية","موارد تدريب غير محدودة"],description:"سرّع رحلة تحفيظ القرآن مع إرشاد الخبراء"}],ht=()=>{const[a,s]=h.useState(null),[t,n]=h.useState(""),{user:r}=M(),i=B(),o=async d=>{if(!r){n("الرجاء تسجيل الدخول أولاً");return}try{const u=v(j,"users",r.uid);await P(u,{planId:d,subscribedAt:new Date}),D.success("تم اشتراكك في الخطة بنجاح!",{style:{borderRadius:"10px",background:"#333",color:"#fff",direction:"rtl"},duration:3e3,position:"top-center"}),setTimeout(()=>{i("/dashboard")},1e3)}catch(u){console.error("خطأ في اشتراك الخطة:",u),D.error("فشل الاشتراك في الخطة. يرجى المحاولة مرة أخرى",{style:{borderRadius:"10px",background:"#ff4b4b",color:"#fff",direction:"rtl"},duration:3e3,position:"top-center"})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-100 py-12 px-4 sm:px-6 lg:px-8 flex items-center justify-center",children:[e.jsx(Me,{}),e.jsxs("div",{className:"max-w-4xl w-full mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"اختر خطة تحفيظ القرآن الخاصة بك"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"اختر الخطة التي تناسب مستواك وأهدافك في تحفيظ كتاب الله"})]}),t&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg text-center mb-6",role:"alert",children:t}),e.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:ct.map(d=>e.jsxs("div",{className:`
                bg-white dark:bg-dark-200 rounded-2xl shadow-xl p-8 
                transform transition-all duration-300 cursor-pointer
                ${a===d.id?"scale-105 border-4 border-green-500 dark:border-green-600":"hover:scale-105 hover:shadow-2xl"}
                text-right
              `,onClick:()=>s(d.id),children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:d.name}),e.jsx("p",{className:"text-xl font-semibold text-green-600 dark:text-green-400 mb-2",children:d.price}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:d.description})]}),e.jsx("ul",{className:"space-y-3 mb-8",children:d.features.map((u,l)=>e.jsxs("li",{className:"flex items-center justify-end text-gray-700 dark:text-gray-200",children:[e.jsx("span",{className:"ml-2",children:u}),e.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},l))}),e.jsx("button",{onClick:()=>o(d.id),className:`
                  w-full py-3 rounded-lg text-white font-bold transition-colors duration-300
                  ${a===d.id?"bg-green-600 dark:bg-green-700 hover:bg-green-700 dark:hover:bg-green-800":"bg-gray-300 dark:bg-gray-700 cursor-not-allowed"}
                `,disabled:a!==d.id,children:a===d.id?"اختيار الخطة":"اختر الخطة"})]},d.id))})]})]})},ut=()=>{const[a,s]=h.useState(""),[t,n]=h.useState(""),[r,i]=h.useState(""),{signIn:o}=M(),d=B(),u=async l=>{l.preventDefault(),i("");try{const{user:f,needsPlanSelection:x}=await o(a,t);d(x?"/select-plan":"/dashboard")}catch{i("خطأ في تسجيل الدخول. يرجى التحقق من البريد الإلكتروني وكلمة المرور")}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-dark-100 py-4 px-2 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"mt-4 text-2xl sm:text-3xl font-extrabold text-gray-900 dark:text-white",children:"تسجيل الدخول"}),e.jsx("p",{className:"mt-2 text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"أهلاً بك مجدداً في تطبيق تحفيظ القرآن"})]}),e.jsxs("form",{className:"space-y-4 bg-white dark:bg-dark-200 p-4 sm:p-8 rounded-xl shadow-md",onSubmit:u,dir:"rtl",children:[r&&e.jsx("div",{className:"text-red-500 text-center mb-2 text-sm",children:r}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"البريد الإلكتروني"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:a,onChange:l=>s(l.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-dark-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-dark-200 dark:text-white",placeholder:"البريد الإلكتروني"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"كلمة المرور"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:t,onChange:l=>n(l.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-dark-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-dark-200 dark:text-white",placeholder:"كلمة المرور"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"w-full py-2 px-4 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-green-700 dark:hover:bg-green-800 transition-colors",children:"تسجيل الدخول"})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:["ليس لديك حساب؟"," ",e.jsx("button",{type:"button",onClick:()=>d("/signup"),className:"text-xs sm:text-sm font-medium text-green-600 hover:text-green-500 dark:text-green-400 dark:hover:text-green-300",children:"إنشاء حساب"})]})})]})]})})},mt=new Te;function xt(){const{user:a,logout:s}=M(),[t,n]=h.useState(()=>localStorage.getItem("theme")==="dark");h.useEffect(()=>{localStorage.getItem("theme")==="dark"&&(document.documentElement.classList.add("dark"),n(!0))},[]);const r=()=>{const o=!t;n(o),o?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},i=[{name:"القرآن الكريم",path:"/",icon:"📖"},{name:"الأحاديث",path:"/hadiths",icon:"📜"},{name:"البحث",path:"/search",icon:"🔍"},{name:"التقويم الهجري",path:"/hijri-calendar",icon:"📅"},{name:"مواقيت الصلاة",path:"/prayer-times",icon:"🕌"}];return e.jsx("nav",{className:"bg-white dark:bg-dark-200 shadow-md fixed top-0 left-0 right-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.jsx($,{to:"/",children:"تطبيق تحفيظ القرآن"})})}),e.jsx("div",{className:"hidden md:flex ml-10 flex-grow justify-center items-center space-x-4",children:i.map(o=>e.jsxs($,{to:o.path,className:"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-100 hover:text-gray-900 dark:hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center",children:[e.jsx("span",{className:"ml-2",children:o.icon}),o.name]},o.path))}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:r,className:"p-2 rounded-full bg-gray-200 dark:bg-dark-100 text-gray-800 dark:text-white",children:t?"☀️":"🌙"}),a?e.jsx("button",{onClick:s,className:"bg-red-500 text-white px-3 py-2 rounded-md text-sm font-medium",children:"تسجيل الخروج"}):e.jsx("div",{className:"hidden md:flex space-x-2"})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-dark-200 shadow-lg md:hidden z-50",children:e.jsx("div",{className:"flex justify-around items-center py-2",children:i.map(o=>e.jsxs($,{to:o.path,className:"flex flex-col items-center text-gray-700 dark:text-gray-300 hover:text-green-600 dark:hover:text-green-400",children:[e.jsx("span",{className:"text-xl",children:o.icon}),e.jsx("span",{className:"text-xs mt-1",children:o.name})]},o.path))})})]})})}function gt(){const[a,s]=h.useState([]),[t,n]=h.useState(!0),[r,i]=h.useState(null);return h.useEffect(()=>{const o=localStorage.getItem("theme"),d=window.matchMedia("(prefers-color-scheme: dark)").matches,u=document.documentElement;o==="dark"||!o&&d?u.classList.add("dark"):u.classList.remove("dark"),(async()=>{try{const f=await ee();s(f),n(!1)}catch(f){i(f),n(!1)}})()},[]),t?e.jsx("div",{className:"flex justify-center items-center h-screen bg-gradient-to-br from-green-400 to-green-600 dark:bg-dark-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-white dark:border-gray-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-white dark:text-gray-200 text-2xl font-bold",children:"قارئ القرآن"})]})}):r?e.jsx("div",{className:"flex justify-center items-center h-screen bg-red-100 dark:bg-dark-100",children:e.jsxs("div",{className:"text-center bg-white dark:bg-dark-200 p-8 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-2xl text-red-600 dark:text-red-400 mb-4",children:"خطأ في التحميل"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:r.message})]})}):e.jsx(Re,{client:mt,children:e.jsx(He,{children:e.jsx(tt,{children:e.jsx(Ie,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-50 pb-16",children:[e.jsx("header",{className:"bg-gradient-to-r from-green-500 to-green-700 dark:from-dark-100 dark:to-dark-200 text-white py-6 shadow-md",children:e.jsx("div",{className:"container mx-auto text-center",children:e.jsx("h1",{className:"text-3xl font-bold",children:"قارئ القرآن"})})}),e.jsx("main",{className:"container mx-auto px-4 pt-6",children:e.jsxs($e,{children:[e.jsx(S,{path:"/",element:e.jsx(Oe,{surahs:a})}),e.jsx(S,{path:"/surah/:surahNumber",element:e.jsx(Qe,{surahs:a})}),e.jsx(S,{path:"/search",element:e.jsx(We,{})}),e.jsx(S,{path:"/hijri-calendar",element:e.jsx(Fe,{})}),e.jsx(S,{path:"/hadiths",element:e.jsx(Ke,{})}),e.jsx(S,{path:"/prayer-times",element:e.jsx(Ze,{})}),e.jsx(S,{path:"/signup",element:e.jsx(rt,{})}),e.jsx(S,{path:"/login",element:e.jsx(ut,{})}),e.jsx(S,{path:"/select-plan",element:e.jsx(ht,{})}),e.jsx(S,{path:"/dashboard",element:e.jsx(dt,{})}),e.jsx(S,{path:"/",element:e.jsx(ze,{to:"/dashboard"})})]})}),e.jsx(xt,{})]})})})})})}Be.createRoot(document.getElementById("root")).render(e.jsx(Y.StrictMode,{children:e.jsx(gt,{})}));
