import{j as e,r as i,a as U,w as W,l as M,m as q,u as Y,b as I,I as oe,F as le,c as ie,L as R,d as de,e as ce,f as he,g as ue,h as me,i as xe,k as ge,C as pe,n as fe,P as ye,o as H,p as O,q as G,s as be,t as we,v as ke,x as je,R as J,y as N,z as P,A as ve,B as Ne,D as X,E as Se,G as Ce,H as Pe,J as L,K as Ae,M as De,N as Q,O as Le,Q as K,S as Ee,T as Z,U as ee,V as Me,_ as A,W as Te,X as Re,Y as Ie,Z as $e,$ as ze,a0 as Fe,a1 as Be,a2 as C,a3 as Ve,a4 as Ue}from"./vendor-uA5MJceG.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerPolicy&&(l.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?l.credentials="include":t.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(t){if(t.ep)return;t.ep=!0;const l=r(t);fetch(t.href,l)}})();const $=({message:a="جارٍ التحميل...",size:s="large",fullScreen:r=!1})=>{const n={small:"h-8 w-8 border-2",medium:"h-12 w-12 border-4",large:"h-16 w-16 border-4"},t=r?"fixed inset-0 z-50 flex justify-center items-center bg-white/50 dark:bg-dark-50/50":"flex justify-center items-center";return e.jsx("div",{className:t,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`
            animate-spin rounded-full 
            border-t-4 border-green-500 
            ${n[s]} 
            mx-auto mb-4
            dark:border-green-300
          `}),e.jsx("h2",{className:"text-gray-700 dark:text-gray-200 text-xl font-bold",children:a})]})})},We=()=>{const[a,s]=i.useState(null),[r,n]=i.useState(new Date),[t,l]=i.useState(null),[o,d]=i.useState(null),[m,u]=i.useState(!0),b=async()=>{try{const x=r.toLocaleDateString("en-GB").replace(/\//g,"-"),f=(await U.get(`https://api.aladhan.com/v1/gToH/${x}`)).data.data.hijri;s({day:f.day,month:{ar:f.month.ar,en:f.month.en},year:f.year,weekdayName:f.weekday.ar}),u(!1)}catch(x){console.error("Hijri date fetch error:",x),d("تعذر جلب التاريخ الهجري"),u(!1)}};if(i.useEffect(()=>{b()},[]),o)return e.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"عذراً! "}),e.jsx("span",{className:"block sm:inline",children:o})]})});const p=x=>x.toLocaleDateString("ar-EG",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return e.jsx("div",{className:"container mx-auto px-4 py-6 mt-20",children:m?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx($,{})}):e.jsxs("div",{className:"bg-white dark:bg-dark-100 rounded-xl shadow-md p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-green-800 dark:text-green-300 mb-2 text-right",children:"التاريخ الميلادي"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-right",children:p(r)})]}),a&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-green-800 dark:text-green-300 mb-2 text-right",children:"التاريخ الهجري"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-right",children:[a.day," ",a.month.ar," ",a.year]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-right",children:a.weekdayName})]}),t&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-right",children:["الموقع: ",t.latitude.toFixed(2),"°N، ",t.longitude.toFixed(2),"°E"]})]})})},_e="https://api.quran.com/api/v4",_=async()=>{try{return await W.v4.chapters.findAll({fetchFn:s=>U.get(s).then(r=>r.data)})}catch(a){throw console.error("Error fetching surahs:",a),a}},qe=async a=>{try{return(await U.get(`${_e}/quran/verses/uthmani`,{params:{chapter_number:a}})).data.verses}catch(s){throw console.error(`Error fetching verses for Surah ${a}:`,s),s}},He=async(a,s)=>{try{const r=new M.Quran,n=s.find(d=>d.id===parseInt(a));if(!n)return console.error("Surah not found:",a),[];const t=n.versesCount||7,l=[];for(let d=1;d<=t;d++)try{const m=r.getVerseWithTranslationAndTafseer(parseInt(a),d,M.TranslationEnum.Arabic,M.TafseerEnum.TafseerAlSaddiArabic);l.push(m)}catch(m){console.error(`Error fetching tafsir for verse ${d}:`,m),l.push(null)}return(await Promise.all(l)).filter(d=>d!==null).map((d,m)=>{const u=m+1;return{verse_key:`${a}:${u}`,tafseer:d.tafseer||"لم يتم العثور على تفسير لهذه الآية"}})}catch(r){return console.error(`Error fetching tafasir for Surah ${a}:`,r),[]}},Oe=async(a,s=1,r=10,n="en")=>{try{const t=a.trim().replace(/\s+/g," ");if(!t)return{results:[],totalResults:0,currentPage:s,totalPages:0};const l=await _(),o=await W.v4.search.search(t,{language:q.ENGLISH,page:s,limit:r});if(o!=null&&o.results&&o.results.length>0){const x=o.results.map(c=>{const f=c.verseKey.split(":")[0],y=l.find(h=>h.id===parseInt(f));return{...c,surah_name:y?y.nameArabic:"",surah_translation:y?y.translatedName.name:""}});return{results:x,totalResults:o.total||x.length,currentPage:s,totalPages:Math.ceil((o.total||x.length)/r)}}const d=t.split(" "),m=await Promise.all(d.map(async x=>{const c=await W.v4.search.search(x,{language:q.ENGLISH,page:s,limit:r});return(c==null?void 0:c.results)||[]})),p=Array.from(new Set(m.flat().map(x=>JSON.stringify(x)))).map(x=>JSON.parse(x)).filter(x=>d.every(c=>{const f=c.toLowerCase();return x.text.toLowerCase().includes(f)||x.verse_key.toLowerCase().includes(f)||x.translation&&x.translation.toLowerCase().includes(f)})).map(x=>{const c=x.verse_key.split(":")[0],f=l.find(y=>y.id===parseInt(c));return{...x,surah_name:f?f.nameArabic:"",surah_translation:f?f.translatedName.name:""}});return await new Promise(x=>setTimeout(x,500)),{results:p,totalResults:p.length,currentPage:s,totalPages:Math.ceil(p.length/r)}}catch(t){return console.error("Error searching Quran:",t),{results:[],totalResults:0,currentPage:s,totalPages:0}}},Ge=({hideNavbar:a=!1})=>{const{surahNumber:s}=Y();I();const[r,n]=i.useState([]),[t,l]=i.useState(null),[o,d]=i.useState([]),[m,u]=i.useState(!0),[b,p]=i.useState(null),[x,c]=i.useState([]),f=i.useRef(null);i.useEffect(()=>((async()=>{try{const g=await _();n(g);const k=g.find(S=>S.pages[0]===parseInt(s));if(l(k),!k)throw new Error(`Surah ${s} not found`);const w=k.pages||[1,604],v=[];for(let S=w[0];S<=w[1];S++)try{const D=await U.get(`https://almotqenapi.onrender.com/show/page/${S}`,{responseType:"blob",timeout:1e4}),z=URL.createObjectURL(D.data);v.push({original:z,originalAlt:`${k.nameArabic} - Page ${S}`,pageNumber:S})}catch(D){console.error(`Error loading page ${S}:`,D)}d(v),u(!1)}catch(g){console.error("Error loading surah pages:",g),p(g.message),u(!1)}})(),()=>{o.forEach(g=>URL.revokeObjectURL(g.original))}),[s]);const y=i.useCallback(()=>{if(o.length<2)return o;const h=[];for(let g=0;g<o.length;g+=2)g+1<o.length?h.push({original:o[g].original,originalAlt:`${o[g].originalAlt} - ${o[g+1].originalAlt}`,pageNumber:`${o[g].pageNumber}-${o[g+1].pageNumber}`,additionalPage:o[g+1]}):h.push(o[g]);return h},[o]);return i.useEffect(()=>{const h=()=>{c(window.innerWidth>=640?y():o)};return h(),window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[o,y]),m?e.jsx($,{}):b?e.jsxs("div",{children:["Error: ",b]}):e.jsx("div",{className:"bg-[#F4F6F7] dark:bg-dark-50 min-h-screen flex flex-col",children:e.jsx("div",{className:"container mx-auto max-w-5xl flex-grow",children:e.jsx("div",{className:"bg-white dark:bg-dark-200 rounded-2xl shadow-xl overflow-hidden border border-gray-100 dark:border-dark-100",children:e.jsx("div",{className:"relative",children:x.length>0?e.jsx("div",{className:"w-full sm:w-full md:w-full lg:w-full mx-auto relative",children:e.jsx(oe,{ref:f,items:x,showThumbnails:!1,showFullscreenButton:!1,useBrowserFullscreen:!0,showBullets:!1,showPlayButton:!1,showIndex:!1,showNav:!1,lazyLoad:!0,isRTL:!0,startIndex:0,renderItem:h=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"block sm:hidden relative",children:[e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-10 bg-white/70 px-3 py-1 rounded-md",children:e.jsxs("p",{className:"text-sm font-bold text-[#2C3E50]",children:["صفحة ",h.pageNumber||"N/A"]})}),e.jsxs("div",{className:"block sm:hidden relative w-screen h-[calc(100vh-3rem)] overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-10 bg-white/70 px-3 py-1 rounded-md",children:e.jsxs("p",{className:"text-sm font-bold text-[#2C3E50]",children:["صفحة ",h.pageNumber||"N/A"]})}),e.jsx("img",{src:h.original,alt:h.originalAlt,className:"absolute inset-0 bg-white w-full h-full object-contain",style:{width:"100%",height:"100%",objectFit:"contain"}})]})]}),e.jsxs("div",{className:"hidden sm:block relative group",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>{var w,v;const g=((w=f.current)==null?void 0:w.getCurrentIndex())||0,k=x.length;g<k-1&&((v=f.current)==null||v.slideLeft())},className:"pointer-events-auto -mr-6 p-2 rounded-full transition-all duration-300 hover:bg-gray-100 dark:hover:bg-dark-100 opacity-0 group-hover:opacity-100",children:e.jsx(le,{className:"h-8 w-8 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"})}),e.jsx("button",{onClick:()=>{var k,w;(((k=f.current)==null?void 0:k.getCurrentIndex())||0)>0&&((w=f.current)==null||w.slideRight())},className:"pointer-events-auto -ml-6 p-2 rounded-full transition-all duration-300 hover:bg-gray-100 dark:hover:bg-dark-100 opacity-0 group-hover:opacity-100",children:e.jsx(ie,{className:"h-8 w-8 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"})})]}),e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-10",children:e.jsxs("div",{className:"bg-white dark:bg-dark-300 text-gray-600 dark:text-gray-300 px-4 py-2 rounded-full shadow-md text-sm",children:["صفحة ",h.pageNumber||"N/A"]})}),e.jsxs("div",{className:"bg-white dark:bg-white rounded-xl overflow-hidden shadow-lg flex",children:[e.jsx("img",{src:h.original,alt:h.originalAlt,className:"w-1/2 h-full object-contain",style:{maxWidth:"50%",maxHeight:"100%",objectFit:"contain"}}),h.additionalPage&&e.jsx("img",{src:h.additionalPage.original,alt:h.additionalPage.originalAlt,className:"w-1/2 h-full object-contain",style:{maxWidth:"50%",maxHeight:"100%",objectFit:"contain"}})]})]})]})})}):e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-dark-100 p-6 rounded-lg",children:"No pages available"})})})})})},te=i.createContext(),Qe=({children:a})=>{const[s,r]=i.useState([]);i.useEffect(()=>{const o=JSON.parse(localStorage.getItem("quran_bookmarks")||"[]");r(o)},[]);const n=(o,d)=>{const m={surahNumber:o,verseNumber:d},u=[...s,m];r(u),localStorage.setItem("quran_bookmarks",JSON.stringify(u))},t=(o,d)=>{const m=s.filter(u=>u.surahNumber!==o||u.verseNumber!==d);r(m),localStorage.setItem("quran_bookmarks",JSON.stringify(m))},l=()=>s[s.length-1]||null;return e.jsx(te.Provider,{value:{bookmarks:s,addBookmark:n,removeBookmark:t,getLastBookmark:l},children:a})},re=()=>{const a=i.useContext(te);if(!a)throw new Error("useQuranProgress must be used within a QuranProgressProvider");return a},Ke=({surahs:a})=>{const[s,r]=i.useState("");re();const n=a.filter(t=>t.nameArabic.includes(s)||t.translatedName.name.toLowerCase().includes(s.toLowerCase()));return e.jsxs("div",{className:"space-y-6 min-h-screen dark:bg-dark-50 dark:text-gray-100 mb-10 mt-20",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-dark-100 shadow-sm rounded-lg",children:e.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-dark-200 rounded-lg p-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-400 dark:text-gray-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"ابحث عن سورة...",value:s,onChange:t=>r(t.target.value),className:"w-full bg-transparent focus:outline-none text-right dark:bg-dark-200 dark:text-gray-100"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(t=>e.jsxs("div",{className:"relative group",children:[e.jsx(R,{to:`/quran-pages/${t.pages[0]}`,className:"block",children:e.jsxs("div",{className:"bg-white dark:bg-dark-100 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900 ml-3 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-green-600 dark:text-green-300 ",children:t.id})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:t.nameArabic}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.translatedName.name," - ",t.versesCount," اية"]})]})]}),e.jsx("div",{className:"text-gray-400 dark:text-gray-600",children:t.revelationPlace==="makkah"?"مكية":"مدنية"})]})}),e.jsx(R,{to:`/surah/${t.id}`,className:"text-green-600 hover:text-green-800 ml-2",children:"انظر التفسير"})]},t.id))}),n.length===0&&e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:e.jsx("p",{children:"لم يتم العثور على سور مطابقة"})})]})},Ye=({surahNumber:a,verseNumber:s})=>{const{bookmarks:r,addBookmark:n,removeBookmark:t}=re(),l=r.some(d=>d.surahNumber===a&&d.verseNumber===s),o=()=>{l?t(a,s):n(a,s)};return e.jsx("button",{onClick:o,className:`
        p-2 rounded-full transition-colors 
        ${l?"text-yellow-500 bg-yellow-100":"text-gray-500 hover:text-yellow-500"}
      `,children:e.jsx(de,{className:"w-5 h-5"})})},Je=({surahs:a})=>{var y;const s=I(),{surahNumber:r}=Y(),[n,t]=i.useState([]),[l,o]=i.useState([]),[d,m]=i.useState(!0),[u,b]=i.useState({}),[p,x]=i.useState(null),c=a.find(h=>h.id===parseInt(r));i.useEffect(()=>{(async()=>{try{const g=await qe(r),k=await He(r,a);t(g),o(k);const w=g.reduce((v,S)=>(v[S.id]=!1,v),{});b(w),m(!1)}catch(g){console.error("Error loading surah details:",g),m(!1)}})()},[r,a]);const f=h=>{b(g=>({...g,[h]:!g[h]}))};return d?e.jsx($,{message:"جارٍ تحميل السورة...",fullScreen:!0}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-50 pb-16",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-700 dark:from-dark-100 dark:to-dark-200 text-white py-6 px-4 relative",children:[e.jsx("button",{onClick:()=>s(-1),className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/20 dark:bg-white/10 rounded-full p-2 hover:bg-white/30 transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2 dark:text-gray-100",children:c==null?void 0:c.nameArabic}),e.jsxs("div",{className:"flex justify-center space-x-4 text-lg dark:text-gray-300",children:[e.jsx("span",{children:(y=c==null?void 0:c.translatedName)==null?void 0:y.name}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["عدد الآيات: ",c==null?void 0:c.versesCount]})]})]})]}),e.jsx("div",{className:"container mx-auto px-4 py-6 space-y-6",children:n.map((h,g)=>e.jsxs("div",{className:"bg-white dark:bg-dark-100 rounded-xl shadow-md p-4 transition-all duration-300 group",onMouseEnter:()=>x(h.id),onMouseLeave:()=>x(null),onClick:()=>l[g]&&f(h.id),children:[e.jsxs("div",{className:`
                text-right text-2xl leading-loose mb-4 
                dark:text-gray-100
                ${l[g]?"cursor-pointer":""}
              `,style:{fontFamily:"Amiri Quran, serif",direction:"rtl"},children:[h.text_uthmani,e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 mr-2 select-none",children:["(",h.verse_key.split(":")[1],")"]})]}),p===h.id&&l[g]&&e.jsx("div",{className:"absolute left-4 top-0 mt-2 z-10 pointer-events-none",children:e.jsx("div",{className:"bg-black text-white text-xs rounded-lg py-1 px-2 shadow-lg",children:"اضغط للحصول على التفسير"})}),l[g]&&u[h.id]&&e.jsxs("div",{className:"bg-green-50 dark:bg-dark-200 p-4 rounded-lg animate-fade-in relative mt-4",children:[e.jsx("div",{className:"absolute top-2 right-2 text-green-800 dark:text-green-300",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg mt-3 font-semibold text-green-800 dark:text-green-300 mb-2",children:"التفسير"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-right",children:l[g].tafseer})]}),e.jsx(Ye,{surahNumber:parseInt(r),verseNumber:h.id})]},h.id))})]})},Xe=()=>{const[a,s]=i.useState(""),[r,n]=i.useState([]),[t,l]=i.useState(0),[o,d]=i.useState(1),[m,u]=i.useState(1),[b,p]=i.useState(!1),[x,c]=i.useState(null),[f,y]=i.useState(!1),h=async(w,v=1)=>{w==null||w.preventDefault();const S=a.trim();if(!S){n([]),l(0),c(null);return}p(!0),c(null),y(!0);try{const D=await Oe(S,v),z=D.results||[];n(z),l(D.totalResults||0),d(v),u(D.totalPages||1),z.length===0&&c("لم يتم العثور على نتائج مطابقة. حاول بكلمات مختلفة.")}catch{c("حدث خطأ أثناء البحث. يرجى المحاولة مرة أخرى."),n([]),l(0)}finally{p(!1)}},g=w=>{h(null,w)},k=w=>{w.key==="Enter"&&h(w)};return b?e.jsx($,{message:"جارٍ البحث...",fullScreen:!0}):e.jsxs("div",{className:"space-y-6 pb-24 dark:bg-dark-50 dark:text-gray-100 min-h-screen",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-dark-100 shadow-sm rounded-lg",children:e.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-dark-200 rounded-lg p-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-400 dark:text-gray-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"ابحث في القرآن...",value:a,onChange:w=>{s(w.target.value),y(!1),c(null)},onKeyPress:k,className:"w-full bg-transparent focus:outline-none text-right dark:bg-dark-200 dark:text-gray-100"}),e.jsx("button",{onClick:h,className:"bg-green-500 dark:bg-green-700 text-white p-2 rounded-lg mr-2",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),!b&&f&&a&&e.jsx("div",{className:"text-center text-gray-600 dark:text-gray-300 py-2",children:t>0?`تم العثور على ${t} نتيجة`:"لم يتم العثور على نتائج"}),x&&e.jsx("div",{className:"text-center text-red-500 dark:text-red-400 py-4",children:x}),e.jsx("div",{className:"container mx-auto px-4 space-y-4",children:r.map((w,v)=>e.jsxs("div",{className:"bg-white dark:bg-dark-100 rounded-xl shadow-md p-4",children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsx("p",{className:"text-green-800 dark:text-green-300 font-bold text-sm",children:w.verse_key}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:[w.surah_name," • ",w.surah_translation]})]}),e.jsx("p",{className:"text-right text-gray-700 dark:text-gray-300",style:{fontFamily:"Amiri Quran, serif"},children:w.text})]},v))}),m>1&&e.jsxs("div",{className:"flex justify-center items-center space-x-4 mt-6",children:[e.jsx("button",{onClick:()=>g(o+1),disabled:o===m,className:"p-2 bg-green-500 dark:bg-green-700 text-white rounded-full disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[o," / ",m]}),e.jsx("button",{onClick:()=>g(o-1),disabled:o===1,className:"p-2 bg-green-500 dark:bg-green-700 text-white rounded-full disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})]})]})},Ze=()=>{const[a,s]=i.useState(null),[r,n]=i.useState(!0),[t,l]=i.useState(!1),[o,d]=i.useState(!1);i.useEffect(()=>{m()},[]);const m=async()=>{n(!0);try{const c=new M.Hadith,f=Math.floor(Math.random()*100)+1,y=await c.getSection(M.HadithBook.Bukhari,f,M.HadithLangEnum.Arabic),h=Math.floor(Math.random()*y.hadiths.length),g=y.hadiths[h];s({text:g.text,narrator:g.narrator,book:"صحيح البخاري",section:y.name}),n(!1)}catch(c){console.error("Error fetching hadith:",c),n(!1)}},u=()=>{if(a){const c=`${a.text}
الكتاب: ${a.book}`;navigator.clipboard.writeText(c),l(!0),setTimeout(()=>l(!1),2e3)}},b=()=>{const c=`حديث نبوي شريف:

"${a.text}"
الكتاب: ${a.book}`,f=encodeURIComponent(c);return{twitter:`https://twitter.com/intent/tweet?text=${f}`,whatsapp:`https://wa.me/?text=${f}`,telegram:`https://t.me/share/url?url=&text=${f}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=&quote=${f}`}},p=c=>{const f=b();window.open(f[c],"_blank")},x=({platform:c,icon:f,bgColor:y,textColor:h,onClick:g})=>e.jsxs("button",{onClick:g,className:`
        flex flex-col items-center justify-center 
        p-3 sm:p-4 space-y-2 
        bg-${y}-50 dark:bg-${y}-900 
        rounded-xl shadow-md 
        hover:bg-${y}-100 dark:hover:bg-${y}-800 
        transition-all duration-300 
        transform hover:-translate-y-1
      `,children:[e.jsx(f,{className:`text-2xl sm:text-3xl ${h} dark:text-white`}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:c})]});return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl mt-10",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-200 rounded-3xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-700 p-4 sm:p-6 text-center",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white drop-shadow-md",children:"أحاديث شريفة"}),e.jsx("p",{className:"text-sm sm:text-base text-white/80 mt-2",children:"استمتع بحكمة من أحاديث الرسول ﷺ"})]}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[a&&e.jsxs("div",{className:"bg-gray-50 dark:bg-dark-100 rounded-2xl p-4 sm:p-6 shadow-inner",children:[e.jsxs("blockquote",{className:"relative text-right text-base sm:text-xl text-gray-800 dark:text-gray-200 leading-relaxed",children:[e.jsx("span",{className:"absolute top-0 right-0 text-4xl sm:text-6xl text-green-200 dark:text-green-800 opacity-50",children:'"'}),a.text,e.jsx("span",{className:"absolute bottom-0 left-0 text-4xl sm:text-6xl text-green-200 dark:text-green-800 opacity-50",children:'"'})]}),e.jsx("div",{className:"mt-4 sm:mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex space-x-4 w-full sm:w-auto justify-center sm:justify-start",children:[e.jsx("button",{onClick:u,className:`
                        p-3 rounded-full transition-all duration-300
                        ${t?"bg-green-500 text-white scale-110":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-300"}
                      `,title:"نسخ الحديث",children:e.jsx(ce,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>d(!0),className:"p-3 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-300 transition-all",title:"مشاركة الحديث",children:e.jsx(he,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"text-center sm:text-left w-full sm:w-auto",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-bold",children:"الكتاب:"})," ",a.book]})})]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:m,className:`
                bg-green-500 text-white 
                px-4 sm:px-6 py-2 sm:py-3 rounded-full 
                hover:bg-green-600 
                transition-all duration-300 
                flex items-center justify-center 
                space-x-2 
                mx-auto 
                shadow-md 
                hover:shadow-lg
                text-sm sm:text-base
              `,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:h-6 sm:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"حديث جديد"})]})})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-dark-200 rounded-2xl shadow-2xl p-4 sm:p-6 w-full max-w-md transform transition-all",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-green-800 dark:text-green-300",children:"مشاركة الحديث"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:h-6 sm:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[e.jsx(x,{platform:"تويتر",icon:ue,bgColor:"blue",textColor:"text-blue-600",onClick:()=>p("twitter")}),e.jsx(x,{platform:"واتساب",icon:me,bgColor:"green",textColor:"text-green-600",onClick:()=>p("whatsapp")}),e.jsx(x,{platform:"تيليجرام",icon:xe,bgColor:"blue",textColor:"text-blue-400",onClick:()=>p("telegram")}),e.jsx(x,{platform:"فيسبوك",icon:ge,bgColor:"indigo",textColor:"text-indigo-600",onClick:()=>p("facebook")})]})]})})]})},et=(a,s,r)=>{try{const[n,t,l]=a.split("-").map(Number),o=new Date(l,t-1,n),d=new pe(s,r),m=fe.Egyptian(),u=new ye(d,o,m);return{fajr:E(u.fajr),sunrise:E(u.sunrise),dhuhr:E(u.dhuhr),asr:E(u.asr),maghrib:E(u.maghrib),isha:E(u.isha)}}catch(n){throw console.error("Error calculating prayer times:",n),n}},E=a=>a?a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):"",tt=a=>{const r=new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}),n={Fajr:a.fajr,Sunrise:a.sunrise,Dhuhr:a.dhuhr,Asr:a.asr,Maghrib:a.maghrib,Isha:a.isha};for(const[t,l]of Object.entries(n))if(r<=l)return t;return"Isha"},F={latitude:30.0444,longitude:31.2357},rt={Fajr:H,Sunrise:O,Dhuhr:G,Asr:G,Maghrib:O,Isha:H},st=()=>{const[a,s]=i.useState(null),[r,n]=i.useState(null),[t,l]=i.useState(F),[o,d]=i.useState(!0),[m,u]=i.useState(null),[b,p]=i.useState(new Date);if(i.useEffect(()=>{const c=async()=>{try{const g=new Date,k=`${g.getDate().toString().padStart(2,"0")}-${(g.getMonth()+1).toString().padStart(2,"0")}-${g.getFullYear()}`;"geolocation"in navigator?navigator.geolocation.getCurrentPosition(async w=>{const v={latitude:w.coords.latitude,longitude:w.coords.longitude};l(v),await f(k,v)},()=>{f(k,F)}):await f(k,F)}catch{u("Unable to fetch prayer times"),d(!1)}},f=async(g,k)=>{try{const w=et(g,k.latitude,k.longitude);s(w),n(tt(w)),d(!1)}catch{u("Unable to fetch prayer times"),d(!1)}};c();const y=setInterval(()=>{p(new Date)},6e4),h=setInterval(c,36e5);return()=>{clearInterval(y),clearInterval(h)}},[]),o)return e.jsx($,{});if(m)return e.jsx("div",{className:"text-red-500 text-center p-4 dark:text-red-300",children:m});const x=["Fajr","Sunrise","Dhuhr","Asr","Maghrib","Isha"];return e.jsx("div",{className:"container mx-auto pt-32 h-[100vh] mt-20",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:"مواقيت الصلاة"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:b.toLocaleDateString("ar-EG",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("p",{className:"text-xl font-semibold text-green-600 dark:text-green-400 mt-2",children:b.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:x.map(c=>{const f=rt[c],y=r===c;return e.jsxs("div",{className:`
                  p-4 rounded-lg shadow-md transition-all duration-300 
                  ${y?"bg-green-100 border-2 border-green-500 dark:bg-green-900 dark:border-green-700":"bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700"}
                `,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`
                      text-lg font-semibold 
                      ${y?"text-green-700 dark:text-green-300":"text-gray-700 dark:text-gray-200"}
                    `,children:c==="Sunrise"?"الشروق":c==="Fajr"?"الفجر":c==="Dhuhr"?"الظهر":c==="Asr"?"العصر":c==="Maghrib"?"المغرب":"العشاء"}),e.jsx("p",{className:`
                      text-sm 
                      ${y?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}
                    `,children:a[c.toLowerCase()]})]}),e.jsx(f,{className:`
                      w-8 h-8 
                      ${y?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-500"}
                    `})]}),y&&e.jsx("div",{className:"mt-2 text-center",children:e.jsx("span",{className:"text-xs text-green-700 dark:text-green-300 font-medium",children:"الوقت الحالي"})})]},c)})}),e.jsx("div",{className:"text-center mt-6 text-gray-600 dark:text-gray-300",children:e.jsxs("p",{children:["الموقع: ",t===F?"القاهرة، مصر (افتراضي)":" القاهرة"]})})]})})},at={apiKey:"AIzaSyDeqM7mekvAHI_alyP2lwhiG_65PqhdRFk",authDomain:"readers-2af16.firebaseapp.com",projectId:"readers-2af16",storageBucket:"readers-2af16.firebasestorage.app",messagingSenderId:"736327315760",appId:"1:736327315760:web:029f483a1ef56e1ebbd8f5"},se=be(at),j=we(se),B=ke(se),ae=i.createContext(),nt=({children:a})=>{const[s,r]=i.useState(null),[n,t]=i.useState(!0),[l,o]=i.useState(null),d=async x=>{try{const c=N(j,"users",x.uid),f=await P(c);if(f.exists()){const y=f.data();if(y.planId)return o(y.planId),y.planId}return null}catch(c){return console.error("Error checking user plan:",c),null}},m=async(x,c)=>{try{const y=(await ve(B,x,c)).user;return await d(y)?{user:y,needsPlanSelection:!1}:{user:y,needsPlanSelection:!0}}catch(f){throw console.error("Sign In Error",f),f}},u=async(x,c,f={})=>{try{const h=(await Ne(B,x,c)).user;return await X(N(j,"users",h.uid),{email:h.email,createdAt:new Date,...f}),{user:h,needsPlanSelection:!0}}catch(y){throw console.error("Sign Up Error",y),y}},b=async()=>{try{await Se(B),r(null),o(null)}catch(x){console.error("Logout Error",x)}};i.useEffect(()=>{const x=je(B,async c=>{if(c){const f=await d(c);o(f)}r(c),t(!1)});return()=>x()},[]);const p={user:s,userPlan:l,loading:n,signUp:u,signIn:m,logout:b};return e.jsx(ae.Provider,{value:p,children:!n&&a})},T=()=>{const a=J.useContext(ae);if(a===void 0)throw new Error("useAuth must be used within an AuthProvider");return a},ot=()=>{const[a,s]=i.useState(""),[r,n]=i.useState(""),[t,l]=i.useState(""),[o,d]=i.useState(""),{signUp:m}=T(),u=I(),b=async p=>{if(p.preventDefault(),d(""),r!==t){d("كلمات المرور غير متطابقة");return}try{const{user:x,needsPlanSelection:c}=await m(a,r);u(c?"/select-plan":"/dashboard")}catch{d("حدث خطأ أثناء إنشاء الحساب. يرجى المحاولة مرة أخرى")}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-dark-100 py-4 px-2 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"mt-4 text-2xl sm:text-3xl font-extrabold text-gray-900 dark:text-white",children:"إنشاء حساب جديد"}),e.jsx("p",{className:"mt-2 text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"انضم إلى رحلة تحفيظ القرآن الكريم"})]}),e.jsxs("form",{className:"space-y-4 bg-white dark:bg-dark-200 p-4 sm:p-8 rounded-xl shadow-md",onSubmit:b,dir:"rtl",children:[o&&e.jsx("div",{className:"text-red-500 text-center mb-2 text-sm",children:o}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"البريد الإلكتروني"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:a,onChange:p=>s(p.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-dark-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-dark-200 dark:text-white",placeholder:"البريد الإلكتروني"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"كلمة المرور"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:r,onChange:p=>n(p.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-dark-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-dark-200 dark:text-white",placeholder:"كلمة المرور"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"تأكيد كلمة المرور"}),e.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",required:!0,value:t,onChange:p=>l(p.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-dark-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-dark-200 dark:text-white",placeholder:"تأكيد كلمة المرور"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"w-full py-2 px-4 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-green-700 dark:hover:bg-green-800 transition-colors",children:"إنشاء حساب"})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:["لديك حساب بالفعل؟"," ",e.jsx("button",{type:"button",onClick:()=>u("/login"),className:"text-xs sm:text-sm font-medium text-green-600 hover:text-green-500 dark:text-green-400 dark:hover:text-green-300",children:"تسجيل الدخول"})]})})]})]})})},ne={1:"الفاتحة",2:"البقرة",3:"آل عمران",4:"النساء",5:"المائدة",6:"الأنعام",7:"الأعراف",8:"الأنفال",9:"التوبة",10:"يونس",11:"هود",12:"يوسف",13:"الرعد",14:"إبراهيم",15:"الحجر",16:"النحل",17:"الإسراء",18:"الكهف",19:"مريم",20:"طه",21:"الأنبياء",22:"الحج",23:"المؤمنون",24:"النور",25:"الفرقان",26:"الشعراء",27:"النمل",28:"القصص",29:"العنكبوت",30:"الروم",31:"لقمان",32:"السجدة",33:"الأحزاب",34:"سبأ",35:"فاطر",36:"يس",37:"الصافات",38:"ص",39:"الزمر",40:"غافر",41:"فصلت",42:"الشورى",43:"الزخرف",44:"الدخان",45:"الجاثية",46:"الأحقاف",47:"محمد",48:"الفتح",49:"الحجرات",50:"ق",51:"الذاريات",52:"الطور",53:"النجم",54:"القمر",55:"الرحمن",56:"الواقعة",57:"الحديد",58:"المجادلة",59:"الحشر",60:"الممتحنة",61:"الصف",62:"الجمعة",63:"المنافقون",64:"التغابن",65:"الطلاق",66:"التحريم",67:"الملك",68:"القلم",69:"الحاقة",70:"المعارج",71:"نوح",72:"الجن",73:"المزمل",74:"المدثر",75:"القيامة",76:"الإنسان",77:"المرسلات",78:"النبأ",79:"النازعات",80:"عبس",81:"التكوير",82:"الانفطار",83:"المطففين",84:"الانشقاق",85:"البروج",86:"الطارق",87:"الأعلى",88:"الغاشية",89:"الفجر",90:"البلد",91:"الشمس",92:"الليل",93:"الضحى",94:"الشرح",95:"التين",96:"العلق",97:"القدر",98:"البينة",99:"الزلزلة",100:"العاديات",101:"القارعة",102:"التكاثر",103:"العصر",104:"الهمزة",105:"الفيل",106:"قريش",107:"الماعون",108:"الكوثر",109:"الكافرون",110:"النصر",111:"المسد",112:"الإخلاص",113:"الفلق",114:"الناس"};class lt{async createUserPlan(s,r){try{const n=N(j,"users",s);return await X(n,{planId:r,startDate:new Date().toISOString(),progress:{completedVerses:0,lastSurah:1,lastAyah:0,lastUpdated:new Date},failures:{},notificationsEnabled:!0},{merge:!0}),n}catch(n){throw console.error("Error creating user plan:",n),n}}async logDailyProgress(s,r){try{const n=N(j,"users",s),t={completedVerses:r.completedVerses||0,dailyGoalMet:r.dailyGoalMet||!1,surah:r.surah||r.lastSurah||"",lastAyah:r.endAyah||r.lastAyah||0,startAyah:r.startAyah||0,timestamp:new Date},l={"progress.completedVerses":Ce(t.completedVerses),"progress.dailyGoalMet":t.dailyGoalMet,"progress.lastSurah":t.surah,"progress.lastAyah":t.lastAyah,"progress.lastMemorizedLocation":{surah:t.surah,ayah:t.lastAyah},"progress.lastUpdated":t.timestamp,"progress.completedTasks":Pe({type:r.taskType||"memorization",verses:t.completedVerses,surah:t.surah,date:t.timestamp,dailyGoalMet:t.dailyGoalMet})};await L(n,l);const o=new CustomEvent("dashboard-update",{detail:{lastSurah:t.surah,lastAyah:t.lastAyah,completedVerses:t.completedVerses,lastMemorizedLocation:{surah:t.surah,ayah:t.lastAyah}}});return window.dispatchEvent(o),t}catch(n){throw console.error("Error logging daily progress:",n),n}}async logFailure(s){try{const r=new Date().toISOString().split("T")[0],n=N(j,"users",s);await L(n,{[`failures.${r}`]:!0})}catch(r){throw console.error("Error logging failure:",r),r}}async trackFailures(s){try{const r=N(j,"users",s),t=(await P(r)).data();if(!t)throw new Error("User not found");const l=N(j,"plans",t.planId),d=(await P(l)).data();if(!d)throw new Error("Plan not found");const m=t.failures||{},u=new Date;u.setDate(u.getDate()-7),Object.keys(m).filter(p=>new Date(p)>=u).length>d.failureTolerance&&await this.adjustMemorizationPlan(s,t.planId)}catch(r){throw console.error("Error tracking failures:",r),r}}async adjustMemorizationPlan(s,r){try{const n=N(j,"users",s),t=N(j,"plans",r),d=(await P(t)).data().dailySchedule.map(m=>({...m,endAyah:Math.floor(m.endAyah*.8)}));await L(t,{dailySchedule:d,lastAdjusted:Ae()}),await L(n,{planAdjustmentNotice:"Your memorization plan has been adjusted to help you succeed."})}catch(n){throw console.error("Error adjusting memorization plan:",n),n}}async generateProgressReport(s){try{const r=N(j,"users",s),t=(await P(r)).data();if(!t)throw new Error("User not found");if(!t.progress){await L(r,{progress:{completedVerses:0,lastSurah:"",lastAyah:0,lastMemorizedLocation:{surah:"",ayah:0},dailyGoalMet:!1,completedTasks:[]}});const u=(await P(r)).data();return{totalCompletedVerses:0,lastMemorizedLocation:{surah:"",ayah:0},failureRate:0}}const l=t.progress.completedTasks||[],o=l.filter(m=>!m.dailyGoalMet).length,d=l.length>0?o/l.length*100:0;return{totalCompletedVerses:t.progress.completedVerses||0,lastMemorizedLocation:{surah:t.progress.lastSurah||"",ayah:t.progress.lastAyah||0},failureRate:d}}catch(r){throw console.error("Error generating progress report:",r),r}}calculateFailureRate(s=[]){if(!s||s.length===0)return 0;const r=s.length;return s.filter(t=>!t.success).length/r*100}async fetchDailyTasks(s){try{const n=(await P(N(j,"users",s))).data();if(!n||!n.planId)throw new Error("No active plan found");const l=(await P(N(j,"plans",n.planId))).data();if(!l||!l.dailySchedule)throw new Error("No daily schedule found for this plan");let o;if(n.subscribedAt?o=typeof n.subscribedAt=="string"?new Date(n.subscribedAt):n.subscribedAt.toDate():n.startDate?o=typeof n.startDate=="string"?new Date(n.startDate):n.startDate.toDate():o=new Date,isNaN(o.getTime()))throw console.error("Invalid start date",n),new Error("Invalid subscription date");const m=Math.max(1,Math.floor((new Date-o)/(1e3*60*60*24))+1),u=l.dailySchedule.find(p=>p.day===`day${m}`||p.day===m.toString()||parseInt(p.day)===m);if(!u)throw console.warn(`No task found for day ${m}`,l.dailySchedule),new Error("No task found for today");const b=ne[u.startSurah]||`سورة رقم ${u.startSurah}`;return{memorization:{id:"memorization",icon:"📖",title:"حفظ آيات جديدة",description:`احفظ آيات من سورة ${b} من آية ${u.startAyah} إلى ${u.endAyah}`,completed:!1,verseCount:u.endAyah-u.startAyah+1,surah:b,startAyah:u.startAyah,endAyah:u.endAyah},revision:{id:"revision",icon:"🔁",title:"مراجعة المحفوظ",description:"راجع الآيات التي حفظتها في الأيام الماضية",completed:!1,verseCount:10}}}catch(r){return console.error("Error fetching daily tasks:",r),{memorization:{id:"memorization",icon:"📖",title:"حفظ آيات جديدة",description:"لم يتم العثور على مهمة اليوم",completed:!1,verseCount:0,surah:"",startAyah:0,endAyah:0},revision:{id:"revision",icon:"🔁",title:"مراجعة المحفوظ",description:"لم يتم العثور على مهمة المراجعة",completed:!1,verseCount:0}}}}}const V=new lt,it=a=>ne[a]||`سورة رقم ${a}`;class dt{async sendReminder(s,r){return(await De(Q(j,"notifications"),{userId:s,type:"memorization_reminder",...r,createdAt:new Date,status:"pending"})).id}async updateNotificationPreferences(s,r){const n=N(j,"users",s);await L(n,{notificationsEnabled:r.enabled,notificationChannels:r.channels||["email","push"]})}async getPendingNotifications(s){const r=Le(Q(j,"notifications"),K("userId","==",s),K("status","==","pending"));return(await Ee(r)).docs.map(t=>({id:t.id,...t.data()}))}async markNotificationAsRead(s){const r=N(j,"notifications",s);await L(r,{status:"read",readAt:new Date})}async sendDailyProgressReminder(s){const r=N(j,"users",s);(await P(r)).data().notificationsEnabled&&await this.sendReminder(s,{title:"Daily Quran Memorization Reminder",message:"You haven't logged your progress today. Let's continue your memorization journey!",priority:"high"})}async sendMotivationalMessage(s){const r=N(j,"users",s),t=(await P(r)).data();let l="";t.progress.completedVerses<50?l="Keep going! Every verse you memorize brings you closer to your goal.":t.progress.completedVerses<200?l="Wow! You're making great progress. Stay consistent!":l="You're an inspiration! Your dedication to memorizing the Quran is remarkable.",await this.sendReminder(s,{title:"Motivational Message",message:l,type:"motivation"})}}const ct=new dt,ht=()=>{const{user:a}=T(),[s,r]=i.useState(null),[n,t]=i.useState(!0),[l,o]=i.useState(null),[d,m]=i.useState(!1);i.useEffect(()=>{(async()=>{if(!a){o("المستخدم غير مسجل"),t(!1);return}try{t(!0);const p=await V.fetchDailyTasks(a.uid);r(p)}catch(p){console.error("Error fetching daily tasks",p),o("تعذر تحميل المهام اليومية"),A.error("حدث خطأ أثناء جلب المهام",{style:{direction:"rtl",background:"#ff4b4b",color:"#fff"}})}finally{t(!1)}})()},[a]);const u=async b=>{if(!s)return;const p=s[b];try{await V.logDailyProgress(a.uid,{completedVerses:p.verseCount,dailyGoalMet:!0,taskType:b,surah:p.surah,startAyah:p.startAyah,endAyah:p.endAyah}),r(x=>({...x,[b]:{...x[b],completed:!0}})),m(!0),setTimeout(()=>m(!1),3e3),A.success(`أحسنت! لقد أكملت مهمة ${p.title}`,{style:{direction:"rtl",background:"#4bb543",color:"#fff"},icon:"🎉"})}catch(x){console.error("Error logging task completion",x),A.error("حدث خطأ أثناء تسجيل الإنجاز",{style:{direction:"rtl",background:"#ff4b4b",color:"#fff"}})}};return n?e.jsx("div",{className:"flex justify-center items-center min-h-[200px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-green-500"})}):l?e.jsx("div",{className:"bg-red-100 p-4 rounded-lg text-center",children:e.jsx("p",{className:"text-red-600",children:l})}):(console.log(s),e.jsxs("div",{className:"bg-white dark:bg-dark-200 shadow-lg rounded-lg p-6",children:[d&&e.jsx(Z,{}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"مهام اليوم"}),e.jsx("div",{className:"space-y-4",children:Object.entries(s||{}).map(([b,p])=>e.jsxs("div",{className:`
              flex items-center justify-between p-4 rounded-lg transition-all duration-300
              ${p.completed?"bg-green-100 dark:bg-green-900/30":"bg-gray-100 dark:bg-dark-100 hover:bg-gray-200 dark:hover:bg-dark-50"}
            `,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`text-3xl ${p.completed?"text-green-600":"text-gray-500 dark:text-gray-300"}`,children:p.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:`
                  text-lg font-semibold 
                  ${p.completed?"text-green-800 dark:text-green-300":"text-gray-800 dark:text-white"}
                `,children:p.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:p.description})]})]}),e.jsx("button",{onClick:()=>u(b),disabled:p.completed,className:`
                p-2 rounded-full transition-all duration-300
                ${p.completed?"text-green-600 cursor-not-allowed":"text-gray-500 hover:bg-gray-200 dark:hover:bg-dark-50"}
              `,children:p.completed?e.jsx(ee,{size:24}):e.jsx(Me,{size:24})})]},b))})]}))},ut=({title:a,value:s,icon:r,color:n})=>e.jsxs("div",{className:`bg-white dark:bg-dark-200 shadow-md rounded-lg p-6 flex items-center ${n}`,children:[e.jsx("div",{className:"mr-4 text-3xl",children:r}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-white",children:a}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s})]})]}),mt=()=>{const{user:a}=T(),[s,r]=i.useState({completedVerses:0,lastSurah:"",lastAyah:0,lastMemorizedLocation:{surah:"",ayah:0}}),[n,t]=i.useState([]),[l,o]=i.useState(!0),[d,m]=i.useState(null),[u,b]=i.useState(0),[p,x]=i.useState(!1),c=i.useCallback(async()=>{var h,g;if(!a){m("المستخدم غير مسجل"),o(!1);return}try{o(!0);const k=await V.generateProgressReport(a.uid),w=await ct.getPendingNotifications(a.uid);r({completedVerses:k.totalCompletedVerses||0,lastSurah:((h=k.lastMemorizedLocation)==null?void 0:h.surah)||"",lastAyah:((g=k.lastMemorizedLocation)==null?void 0:g.ayah)||0,lastMemorizedLocation:k.lastMemorizedLocation||{surah:"",ayah:0}}),t(w||[])}catch(k){console.error("Dashboard fetch error",k),m("حدث خطأ أثناء جلب البيانات"),A.error("تعذر تحميل بيانات التقدم",{style:{direction:"rtl",background:"#ff4b4b",color:"#fff"}})}finally{o(!1)}},[a]);i.useEffect(()=>{c();const h=g=>{const{lastSurah:k,lastAyah:w,completedVerses:v}=g.detail;r(S=>({...S,lastSurah:k,lastAyah:w,completedVerses:v}))};return window.addEventListener("dashboard-update",h),()=>{window.removeEventListener("dashboard-update",h)}},[c]);const f=async()=>{var h,g;if(!a){A.error("يرجى تسجيل الدخول أولاً",{style:{direction:"rtl",background:"#ff4b4b",color:"#fff"}});return}if(u<=0){A.error("الرجاء إدخال عدد الآيات الصحيح",{style:{direction:"rtl",background:"#ff4b4b",color:"#fff"}});return}try{const k={completedVerses:u,dailyGoalMet:!0,lastSurah:((h=s.lastMemorizedLocation)==null?void 0:h.surah)||"",lastAyah:((g=s.lastMemorizedLocation)==null?void 0:g.ayah)||""},w=await V.logDailyProgress(a.uid,k);x(!0),setTimeout(()=>x(!1),5e3),await c(),b(0),A.success("تم تسجيل التقدم بنجاح",{style:{direction:"rtl",background:"#4bb543",color:"#fff"},icon:"🎉"})}catch(k){console.error("Progress logging error",k),A.error("تعذر تسجيل التقدم",{style:{direction:"rtl",background:"#ff4b4b",color:"#fff"}})}};if(l)return e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-green-500"})});if(d)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-red-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl text-red-600 mb-4",children:d}),e.jsx("button",{onClick:c,className:"bg-green-500 text-white px-4 py-2 rounded",children:"إعادة المحاولة"})]})});const y=[{title:"آخر سورة محفوظة",value:s.lastSurah?it(s.lastSurah):"لم يتم الحفظ بعد",icon:e.jsx(Te,{}),color:"text-green-500"},{title:"آخر آية محفوظة",value:s.lastAyah>0?`الآية ${s.lastAyah}`:"لم يتم الحفظ بعد",icon:e.jsx(Re,{}),color:"text-blue-500"},{title:"الآيات المحفوظة",value:`${s.completedVerses} آية`,icon:e.jsx(ee,{}),color:"text-purple-500"}];return e.jsxs("div",{className:"container mx-auto p-6 text-right",children:[e.jsx("div",{className:"mb-10",children:e.jsx(ht,{})}),p&&e.jsx(Z,{}),e.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800 dark:text-white",children:"لوحة متابعة حفظ القرآن"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:y.map((h,g)=>e.jsx(ut,{title:h.title,value:h.value,icon:h.icon,color:h.color},g))}),e.jsxs("div",{className:"bg-white dark:bg-dark-200 shadow rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-white",children:"تسجيل التقدم اليومي"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"number",placeholder:"عدد الآيات المحفوظة اليوم",value:u,onChange:h=>b(parseInt(h.target.value)||0),className:"w-full p-2 border rounded mb-4 dark:bg-dark-100 dark:text-white"}),e.jsx("button",{onClick:f,className:"bg-green-500 text-white px-4 py-2 rounded mb-4 hover:bg-green-600 transition-colors",children:"تسجيل"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-200 shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-white",children:"التنبيهات"}),n.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-300",children:"لا توجد تنبيهات حالياً"}):n.map(h=>{var g,k;return e.jsxs("div",{className:"mb-4 p-4 bg-gray-100 dark:bg-dark-100 rounded flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"dark:text-white",children:h.message}),e.jsx("small",{className:"text-gray-500 dark:text-gray-300",children:(k=(g=h.createdAt)==null?void 0:g.toDate())==null?void 0:k.toLocaleString()})]}),e.jsx("button",{onClick:()=>{},className:"text-blue-500 hover:text-blue-700",children:"عرض التفاصيل"})]},h.id)})]})]})},xt=[{id:"plan_a",name:"الخطة الأساسية",price:"مجاني",features:["تحفيظ آية يومية","إرشادات أساسية في التجويد","تتبع التقدم","دعم مجتمعي"],description:"مثالي للمبتدئين في رحلة تحفيظ القرآن"},{id:"plan_b",name:"الخطة المتقدمة",price:"9.99 دولار / شهريًا",features:["برنامج شامل للتحفيظ","تدريب شخصي على التجويد","تحليلات متقدمة للتقدم","جلسات إرشادية فردية","موارد تدريب غير محدودة"],description:"سرّع رحلة تحفيظ القرآن مع إرشاد الخبراء"}],gt=()=>{const[a,s]=i.useState(null),[r,n]=i.useState(""),{user:t}=T(),l=I(),o=async d=>{if(!t){n("الرجاء تسجيل الدخول أولاً");return}try{const m=N(j,"users",t.uid);await L(m,{planId:d,subscribedAt:new Date}),A.success("تم اشتراكك في الخطة بنجاح!",{style:{borderRadius:"10px",background:"#333",color:"#fff",direction:"rtl"},duration:3e3,position:"top-center"}),setTimeout(()=>{l("/dashboard")},1e3)}catch(m){console.error("خطأ في اشتراك الخطة:",m),A.error("فشل الاشتراك في الخطة. يرجى المحاولة مرة أخرى",{style:{borderRadius:"10px",background:"#ff4b4b",color:"#fff",direction:"rtl"},duration:3e3,position:"top-center"})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-100 py-12 px-4 sm:px-6 lg:px-8 flex items-center justify-center",children:[e.jsx(Ie,{}),e.jsxs("div",{className:"max-w-4xl w-full mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"اختر خطة تحفيظ القرآن الخاصة بك"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"اختر الخطة التي تناسب مستواك وأهدافك في تحفيظ كتاب الله"})]}),r&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg text-center mb-6",role:"alert",children:r}),e.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:xt.map(d=>e.jsxs("div",{className:`
                bg-white dark:bg-dark-200 rounded-2xl shadow-xl p-8 
                transform transition-all duration-300 cursor-pointer
                ${a===d.id?"scale-105 border-4 border-green-500 dark:border-green-600":"hover:scale-105 hover:shadow-2xl"}
                text-right
              `,onClick:()=>s(d.id),children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:d.name}),e.jsx("p",{className:"text-xl font-semibold text-green-600 dark:text-green-400 mb-2",children:d.price}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:d.description})]}),e.jsx("ul",{className:"space-y-3 mb-8",children:d.features.map((m,u)=>e.jsxs("li",{className:"flex items-center justify-end text-gray-700 dark:text-gray-200",children:[e.jsx("span",{className:"ml-2",children:m}),e.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},u))}),e.jsx("button",{onClick:()=>o(d.id),className:`
                  w-full py-3 rounded-lg text-white font-bold transition-colors duration-300
                  ${a===d.id?"bg-green-600 dark:bg-green-700 hover:bg-green-700 dark:hover:bg-green-800":"bg-gray-300 dark:bg-gray-700 cursor-not-allowed"}
                `,disabled:a!==d.id,children:a===d.id?"اختيار الخطة":"اختر الخطة"})]},d.id))})]})]})},pt=()=>{const[a,s]=i.useState(""),[r,n]=i.useState(""),[t,l]=i.useState(""),{signIn:o}=T(),d=I(),m=async u=>{u.preventDefault(),l("");try{const{user:b,needsPlanSelection:p}=await o(a,r);d(p?"/select-plan":"/dashboard")}catch{l("خطأ في تسجيل الدخول. يرجى التحقق من البريد الإلكتروني وكلمة المرور")}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-dark-100 py-4 px-2 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"mt-4 text-2xl sm:text-3xl font-extrabold text-gray-900 dark:text-white",children:"تسجيل الدخول"}),e.jsx("p",{className:"mt-2 text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"أهلاً بك مجدداً في تطبيق تحفيظ القرآن"})]}),e.jsxs("form",{className:"space-y-4 bg-white dark:bg-dark-200 p-4 sm:p-8 rounded-xl shadow-md",onSubmit:m,dir:"rtl",children:[t&&e.jsx("div",{className:"text-red-500 text-center mb-2 text-sm",children:t}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"البريد الإلكتروني"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:a,onChange:u=>s(u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-dark-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-dark-200 dark:text-white",placeholder:"البريد الإلكتروني"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"كلمة المرور"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:r,onChange:u=>n(u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-dark-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-dark-200 dark:text-white",placeholder:"كلمة المرور"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"w-full py-2 px-4 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-green-700 dark:hover:bg-green-800 transition-colors",children:"تسجيل الدخول"})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:["ليس لديك حساب؟"," ",e.jsx("button",{type:"button",onClick:()=>d("/signup"),className:"text-xs sm:text-sm font-medium text-green-600 hover:text-green-500 dark:text-green-400 dark:hover:text-green-300",children:"إنشاء حساب"})]})})]})]})})};function ft(){const{user:a,logout:s}=T(),[r,n]=i.useState(()=>localStorage.getItem("theme")==="dark");i.useEffect(()=>{localStorage.getItem("theme")==="dark"&&(document.documentElement.classList.add("dark"),n(!0))},[]);const t=()=>{const o=!r;n(o),o?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},l=[{name:"القرآن الكريم",path:"/",icon:"📖"},{name:"الأحاديث",path:"/hadiths",icon:"📜"},{name:"البحث",path:"/search",icon:"🔍"},{name:"التقويم الهجري",path:"/hijri-calendar",icon:"📅"},{name:"مواقيت الصلاة",path:"/prayer-times",icon:"🕌"}];return e.jsx("nav",{className:"bg-white dark:bg-dark-200 shadow-md fixed top-0 left-0 right-0 z-50",children:e.jsxs("div",{className:"app-topbar max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.jsx(R,{to:"/",children:"تطبيق تحفيظ القرآن"})})}),e.jsx("div",{className:"hidden md:flex ml-10 flex-grow justify-center items-center space-x-4",children:l.map(o=>e.jsxs(R,{to:o.path,className:"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-100 hover:text-gray-900 dark:hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center",children:[e.jsx("span",{className:"ml-2",children:o.icon}),o.name]},o.path))}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:t,className:"p-2 rounded-full bg-gray-200 dark:bg-dark-100 text-gray-800 dark:text-white",children:r?"☀️":"🌙"}),a?e.jsx("button",{onClick:s,className:"bg-red-500 text-white px-3 py-2 rounded-md text-sm font-medium",children:"تسجيل الخروج"}):e.jsx("div",{className:"hidden md:flex space-x-2"})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-dark-200 shadow-lg md:hidden z-50",children:e.jsx("div",{className:"flex justify-around items-center py-2",children:l.map(o=>e.jsxs(R,{to:o.path,className:"flex flex-col items-center text-gray-700 dark:text-gray-300 hover:text-green-600 dark:hover:text-green-400",children:[e.jsx("span",{className:"text-xl",children:o.icon}),e.jsx("span",{className:"text-xs mt-1",children:o.name})]},o.path))})})]})})}const yt=new $e;function bt(){const[a,s]=i.useState([]),[r,n]=i.useState(!0),[t,l]=i.useState(null),[o,d]=i.useState(!0);i.useEffect(()=>{const u=localStorage.getItem("theme"),b=window.matchMedia("(prefers-color-scheme: dark)").matches,p=document.documentElement;u==="dark"||!u&&b?p.classList.add("dark"):p.classList.remove("dark"),(async()=>{try{const c=await _();s(c),n(!1)}catch(c){l(c),n(!1)}})()},[]);const m=()=>{window.innerWidth<=768&&d(u=>!u)};return r?e.jsx("div",{className:"flex justify-center items-center h-screen bg-gradient-to-br from-green-400 to-green-600 dark:bg-dark-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-white dark:border-gray-300 mx-auto mb-4"}),e.jsx("h2",{className:"text-white dark:text-gray-200 text-2xl font-bold",children:"قارئ القرآن"})]})}):t?e.jsx("div",{className:"flex justify-center items-center h-screen bg-red-100 dark:bg-dark-100",children:e.jsxs("div",{className:"text-center bg-white dark:bg-dark-200 p-8 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-2xl text-red-600 dark:text-red-400 mb-4",children:"خطأ في التحميل"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.message})]})}):e.jsx(ze,{client:yt,children:e.jsx(Qe,{children:e.jsx(nt,{children:e.jsx(Fe,{children:e.jsxs("div",{onClick:m,className:"min-h-screen",children:[e.jsx(ft,{}),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-50 pb-16",children:[e.jsx("header",{className:"top-header bg-gradient-to-r from-green-500 to-green-700 dark:from-dark-100 dark:to-dark-200 text-white py-6 shadow-md",children:e.jsx("div",{className:"container mx-auto text-center",children:e.jsx("h1",{className:"text-3xl font-bold",children:"قارئ القرآن"})})}),e.jsx("main",{className:"container mx-auto h-[100vh]",children:e.jsxs(Be,{children:[e.jsx(C,{path:"/",element:e.jsx(Ke,{surahs:a})}),e.jsx(C,{path:"/surah/:surahNumber",element:e.jsx(Je,{surahs:a})}),e.jsx(C,{path:"/search",element:e.jsx(Xe,{})}),e.jsx(C,{path:"/hijri-calendar",element:e.jsx(We,{})}),e.jsx(C,{path:"/hadiths",element:e.jsx(Ze,{})}),e.jsx(C,{path:"/prayer-times",element:e.jsx(st,{})}),e.jsx(C,{path:"/signup",element:e.jsx(ot,{})}),e.jsx(C,{path:"/login",element:e.jsx(pt,{})}),e.jsx(C,{path:"/quran-pages/:surahNumber",element:e.jsx(Ge,{})}),e.jsx(C,{path:"/select-plan",element:e.jsx(gt,{})}),e.jsx(C,{path:"/dashboard",element:e.jsx(mt,{})}),e.jsx(C,{path:"/",element:e.jsx(Ve,{to:"/dashboard"})})]})})]})]})})})})})}"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(a=>{console.log("Service Worker registered with scope:",a.scope)}).catch(a=>{console.error("Service Worker registration failed:",a)});Ue.createRoot(document.getElementById("root")).render(e.jsx(J.StrictMode,{children:e.jsx(bt,{})}));
